(this.webpackJsonpbedatos_web=this.webpackJsonpbedatos_web||[]).push([[7],{992:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a(34),i=a(164),n=a.n(i),o=(a(336),a(337),a(211),a(44),a(11)),c=a.n(o),d=a(392),l=a(363),u=a(25),h=a(27),p=a(26),m=a(328),y=a(98),g=a(28),j=a(428),b=a(473),O=a(252),L=a(20),D=a.n(L),f=a(48),x=a(115),T=a(40),S=a(22),C=a(216),U=(a(33),a(305)),v=a(253),P=a.n(v),N=a(49),E=a(38),w=a(55),M=a(393),B=(a(548),a(478));var V=a(257),q=a.n(V),_=a(0);let I={tradeType:"",searchBy:"",searchValue:"",countryCode:"",fromDate:"",toDate:"",matchType:"",dateRange:"",searchFlag:!1,queryBuilder:[],SearchQueryCount:0,isMainSearch:!1};const R=e=>window.scrollTo(0,e.current.offsetTop);const Y=e=>{let{multiTradeCountryList:t,selectedTradeCountry:a,setFieldValue:s,values:i,setSelectedTradeCountry:n,setMaxMinDate:o}=e;const[d,l]=Object(r.useState)(!1),[h,m]=Object(r.useState)([]),[y,g]=Object(r.useState)(!1),[j,b]=Object(r.useState)(null),[O,L]=Object(r.useState)([]),[D,f]=Object(r.useState)({}),x=t.reduce(((e,t)=>{const a=t.continentName||"Unknown";return e[a]||(e[a]=[]),e[a].push(t),e}),{});Object(r.useEffect)((()=>{const e=a.map((e=>e.value));m(e),g(e.length===t.length)}),[a,t]);const T=e=>{const t=O.find((t=>t.column_name===e));return t?`${e} (${t.records_count})`:`${e} (0)`};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"country-box countryModal",onClick:async()=>{if(l(!0),a.length>0){const t={tradeType:i.tradeType,searchBy:i.searchBy,searchValue:i.searchValue,countryCode:i.countryCode,fromDate:c()(i.fromDate).format("YYYY-MM-DD"),toDate:c()(i.toDate).format("YYYY-MM-DD"),matchType:i.matchType,queryBuilder:i.queryBuilder,columnName:"ctry_name",consumptionType:[],incoterm:[],notifyParty:[],numberOfRecords:20,orderByColumn:"",orderByMode:"desc",pageNumber:0,searchType:"HISTORY",shipModeList:[],stdUnitList:[]};try{const e=await Object(u.a)({method:"POST",url:"/search-management/listdistinctcolumnvalue",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}});e.data&&e.data.distinctColumnValuesList&&L(e.data.distinctColumnValuesList)}catch(e){console.error("Error fetching country data:",e)}}},children:a.length>0?a.length<=2?a.map((e=>e.label)).join(", "):`${a[0].label}, ${a[1].label}, ...`:"Select Countries"}),Object(_.jsxs)(p.a,{show:d,onHide:()=>l(!1),size:"lg",children:[Object(_.jsx)(p.a.Header,{closeButton:!0,children:Object(_.jsx)(p.a.Title,{children:"Select Countries"})}),Object(_.jsxs)(p.a.Body,{children:[Object(_.jsx)("div",{className:"row mb-3",children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsxs)("div",{className:"d-flex align-items-center countryModal_data_div",children:[Object(_.jsx)("input",{type:"checkbox",checked:y,onChange:()=>{if(y)m([]),n([]),s("countryCode",[]),s("fromDate",""),s("toDate",""),s("dateRange",""),o([],i.tradeType);else{const e=t.map((e=>e.value));m(e);const a=t;n(a),s("countryCode",e),s("fromDate",""),s("toDate",""),s("dateRange",""),o(a,i.tradeType)}g(!y),b(null)}}),Object(_.jsx)("label",{children:"Select All"})]})})}),null!==j&&Object(_.jsx)("div",{className:"row mb-3",children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsxs)("p",{children:["Checked Countries: ",j]})})}),Object(_.jsx)("div",{className:"countryModalData",children:Object.keys(x).map(((e,a)=>Object(_.jsxs)("div",{className:"continent-section countryModal_contentSection",children:[Object(_.jsx)("h5",{children:e}),Object(_.jsx)("div",{className:"row countryModal_row",children:x[e].map((e=>Object(_.jsx)("div",{className:"col-md-4",children:Object(_.jsxs)("div",{className:"d-flex align-items-center countryModal_data_div",children:[Object(_.jsx)("input",{type:"checkbox",checked:h.includes(e.value),onChange:()=>(e=>{let a;a=h.includes(e)?h.filter((t=>t!==e)):[...h,e],m(a);const r=t.filter((e=>a.includes(e.value)));n(r),s("countryCode",a),s("fromDate",""),s("toDate",""),s("dateRange",""),o(r,i.tradeType),g(a.length===t.length),b(null)})(e.value)}),Object(_.jsxs)("label",{children:[Object(_.jsx)(q.a,{code:e.iso2code,style:{width:"2em",height:"1.5em",marginRight:"5px"},alt:e.label}),T(e.label)]})]})},e.value)))})]},a)))})]})]})]})},A=g.b().shape({tradeType:g.c().required("Please select trade type"),searchBy:g.c().required("This field is required"),matchType:g.c().required("This field is required"),dateRange:g.c().required("This field is required"),fromDate:g.a().required("This field is required").test("checkGreaterStartEndTimes","From date should be less than To date",(function(e){return!e||Object(U.a)(e,this.parent.toDate)})),toDate:g.a().required("This field is required").test("checkGreaterStartEndTimes","To date should be greater than From date",(function(e){return!e||Object(U.a)(this.parent.fromDate,e)})).test("checkGreaterTimes","To date should be less than 3 years",(function(e){return!e||Object(U.b)(this.parent.fromDate,e)}))});t.default=Object(s.i)(Object(w.b)((e=>({loading:e.loader.loading,download_count:e.data.download_count,subscriptionId:e.data.subscriptionId,dataAccess_count:e.data.dataAccess_count,totalWorkspace:e.data.totalWorkspace,subUserCount:e.data.subUserCount,queryPerDay:e.data.queryPerDay,downloadArray:e.data.downloadArray,countryList:e.data.countryList,dataAccessInMonth:e.data.dataAccessInMonth,download_count_subUser:e.data.download_count_subUser,dataAccessUpto:e.data.dataAccessUpto,maxDownload:e.data.maxDownload})),(e=>({loadingStart:()=>e(Object(N.a)()),loadingStop:()=>e(Object(N.b)()),updateSubscriptionCount:t=>e(Object(E.i)(t)),updateDownloadArrayCount:t=>e(Object(E.h)(t)),setDloadCountSubuser:t=>e(Object(E.d)(t)),setSearchQuery:t=>e(Object(E.f)(t))})))((e=>{const t=localStorage.getItem("userToken"),i=localStorage.getItem("user"),o=i?JSON.parse(i):{},g=(o.firstname,o.lastname,o.email,o.uplineId>0?o.uplineId:o.userid),L=Object(s.g)(),U=e.location.state?e.location.state.search_id:null,v=e.location.state&&e.location.state.search_type?e.location.state.search_type:"",N=e.location.state&&e.location.state.workspace_id?e.location.state.workspace_id:"",E=e.location.state?e.location.state.workspace_name:"",w=e.location.state?e.location.state.workspace_desc:"",V=e.location.state?e.location.state.workspaceId:"",q=[{value:e&&e.location.state&&e.location.state.searchValue,label:e&&e.location.state&&e.location.state.searchValue}],k=Object(r.useRef)(),[Q,F]=Object(r.useState)(!1),[$,J]=Object(r.useState)([]),[W,H]=Object(r.useState)(20),[X,z]=Object(r.useState)(1),[G,K]=Object(r.useState)(0),[Z,ee]=Object(r.useState)(!1),[te,ae]=Object(r.useState)(I.searchValue),[re,se]=Object(r.useState)([]),[ie,ne]=Object(r.useState)([]),[oe,ce]=Object(r.useState)([]),[de,le]=Object(r.useState)([]),[ue,he]=Object(r.useState)([]),[pe,me]=Object(r.useState)([]),[ye,ge]=Object(r.useState)([]),[je,be]=Object(r.useState)([]),[Oe,Le]=Object(r.useState)([]),[De,fe]=Object(r.useState)([]),[xe,Te]=Object(r.useState)([]),[Se,Ce]=Object(r.useState)([]),[Ue,ve]=Object(r.useState)([]),[Pe,Ne]=Object(r.useState)([]),[Ee,we]=Object(r.useState)(),[Me,Be]=Object(r.useState)(""),[Ve,qe]=Object(r.useState)("desc"),[_e,Ie]=Object(r.useState)(!1),[Re,Ye]=Object(r.useState)(!1),[Ae,ke]=Object(r.useState)(!1),[Qe,Fe]=Object(r.useState)(!1),[$e,Je]=Object(r.useState)(!1),[We,He]=Object(r.useState)(!1),[Xe,ze]=Object(r.useState)([]),[Ge,Ke]=Object(r.useState)([]),[Ze,et]=Object(r.useState)([]),[tt,at]=Object(r.useState)([]),[rt,st]=Object(r.useState)([]),[it,nt]=Object(r.useState)([]),[ot,ct]=Object(r.useState)([]),[dt,lt]=Object(r.useState)(""),[ut,ht]=Object(r.useState)(!1),[pt,mt]=Object(r.useState)(!0),[yt,gt]=Object(r.useState)(0),[jt,bt]=Object(r.useState)([]),[Ot,Lt]=Object(r.useState)([]),[Dt,ft]=Object(r.useState)(""),[xt,Tt]=Object(r.useState)(""),[St,Ct]=Object(r.useState)(""),[Ut,vt]=Object(r.useState)([]),[Pt,Nt]=Object(r.useState)([]),[Et,wt]=Object(r.useState)([]),[Mt,Bt]=Object(r.useState)([]),[Vt,qt]=Object(r.useState)([]),[_t,It]=Object(r.useState)([]),[Rt,Yt]=Object(r.useState)([]),At=Object(r.useRef)(),kt=Object(r.useRef)(),Qt=Object(r.useRef)(),Ft=Object(r.useRef)(),[$t,Jt]=Object(r.useState)(!1),[Wt,Ht]=Object(r.useState)(""),[Xt,zt]=Object(r.useState)(""),[Gt,Kt]=Object(r.useState)(""),[Zt,ea]=Object(r.useState)(""),[ta,aa]=Object(r.useState)(""),[ra,sa]=Object(r.useState)([]),[ia,na]=Object(r.useState)([]),[oa,ca]=Object(r.useState)([]),[da,la]=Object(r.useState)([]),[ua,ha]=Object(r.useState)([]),[pa,ma]=Object(r.useState)([]),[ya,ga]=Object(r.useState)(!1),[ja,ba]=Object(r.useState)(new Date),[Oa,La]=Object(r.useState)(new Date),[Da,fa]=Object(r.useState)([]),[xa,Ta]=Object(r.useState)(1),[Sa,Ca]=Object(r.useState)([]),[Ua,va]=Object(r.useState)([]),Pa=()=>{Jt(!$t),zt(""),Kt(""),ea(""),aa("")},Na=t=>{Object(T.a)({method:"PUT",url:`user-management/user-subscription/update/${e.subscriptionId}`,data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{console.log("user",e.data)})).catch((e=>{console.log("Err",e)}))};Object(r.useEffect)((()=>{Object(B.a)(L)}),[e.loading,ua,ra,Z]);const Ea=t=>{e.totalWorkspace>0?D.a.fire({title:"Create Workspace !",text:`Available Limit ${e.totalWorkspace}. \n Are you sure you want to Create New Workspace ?`,icon:"warning",dangerMode:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((e=>{e.value&&Jt(t)})):D.a.fire({title:"Create Workspace !",text:"Your Workspace Limit Exhausted",icon:"error",dangerMode:!0,confirmButtonColor:"#3085d6"}).then((e=>{}))},wa=()=>{const e={workspace_id:N,search_id:Ee,name:E,description:w,is_active:"Y",id:V};Object(f.a)({method:"POST",url:"/activity-management/workspace/savesearch",data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{D.a.fire({title:"Success",text:"Search query saved successfully",icon:"success"})})).catch((e=>{let t="Somethhing went wrong, please try again.";e.data.errorMsg&&(t=e.data.errorMsg),D.a.fire({title:"Oops!",text:t,icon:"error"})}))};Object(r.useEffect)((()=>()=>{I={}}),[]),Object(r.useEffect)((()=>{te&&te.tradeType&&Ya(te),e&&e.location.state&&e.location.state.searchValue&&ha(q),I={...I,tradeType:e&&e.location.state&&e.location.state.tradeType?e.location.state.tradeType:"",matchType:"",searchBy:e&&e.location.state&&e.location.state.searchType?e.location.state.searchType:"",searchValue:e&&e.location.state&&e.location.state.searchType,countryCode:e&&e.location.state&&e.location.state.countryCode,fromDate:"",toDate:"",dateRange:"",queryBuilder:[]},e&&e.location.state&&e.location.state.tradeType&&sr(e&&e.location.state&&"IMPORT"==e.location.state.tradeType?"I":"E")}),[X,W,Me,Ve]);const Ma=e=>{z(1),H(e)},Ba=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"TRADE";lt("N"),e.loadingStart();var s=[];s.searchType=r,s.tradeType=t.tradeType,s.searchBy=t.searchBy,s.searchValue=t.searchValue,s.countryCode=t.countryCode,s.fromDate=c()(t.fromDate).format("YYYY-MM-DD"),s.toDate=c()(t.toDate).format("YYYY-MM-DD"),s.matchType=t.matchType,s.searchFlag=t.searchFlag,s.queryBuilder=t.queryBuilder,t.portOriginList&&(he(t.portOriginList),s.portOriginList=t.portOriginList),t.portDestinationList&&(be(t.portDestinationList),s.portDestinationList=t.portDestinationList),t.hsCodeList&&(Te(t.hsCodeList),s.hsCodeList=t.hsCodeList),t.hsCode4DigitList&&(et(t.hsCode4DigitList),s.hsCode4DigitList=t.hsCode4DigitList),t.importerList&&(se(t.importerList),s.importerList=t.importerList),t.exporterList&&(ce(t.exporterList),s.exporterList=t.exporterList),t.cityOriginList&&(ve(t.cityOriginList),s.cityOriginList=t.cityOriginList),t.cityDestinationList&&(Ne(t.cityDestinationList),s.cityDestinationList=t.cityDestinationList),t.shipmentModeList&&(Ke(t.shipmentModeList),s.shipmentModeList=t.shipmentModeList),t.stdUnitList&&(Lt(t.stdUnitList),s.stdUnitList=t.stdUnitList),t.minQuantity&&(s.rangeQuantityStart=t.minQuantity),t.maxQuantity&&(s.rangeQuantityEnd=t.maxQuantity),t.minValue&&(s.rangeValueUsdStart=t.minValue),t.maxValue&&(s.rangeValueUsdEnd=t.maxValue),t.minUnitPrice&&(s.rangeUnitPriceUsdStart=t.minUnitPrice),t.maxUnitPrice&&(s.rangeUnitPriceUsdEnd=t.maxUnitPrice),t.consumptionTypeList&&(Nt(t.consumptionTypeList),s.consumptionType=t.consumptionTypeList),t.incotermList&&(Bt(t.incotermList),s.incoterm=t.incotermList),t.notifyPartyList&&(It(t.notifyPartyList),s.notifyParty=t.notifyPartyList),t.descriptionList&&(s.conditionProductDesc=t.conditionProductDescription,s.productDesc=t.descriptionList),s.isMainSearch=t.isMainSearch,ae(s);let i={tradeType:t.tradeType,searchBy:t.searchBy,searchValue:t.searchValue,countryCode:t.countryCode,fromDate:c()(t.fromDate).format("YYYY-MM-DD"),toDate:c()(t.toDate).format("YYYY-MM-DD"),matchType:t.matchType};localStorage.setItem("searchParam",JSON.stringify(i)),""!=Ee?(st([]),Ra(s,a)):e.queryPerDay>0?Ra(s):e.queryPerDay<=0&&null!=e.queryPerDay&&(e.loadingStop(),D.a.fire({title:"Search !",text:"Your Search Limit Exhausted",icon:"error",dangerMode:!0,confirmButtonColor:"#3085d6"}).then((e=>{})))},Va=()=>{if(G*xa<=e.maxDownload)if(te&&te.tradeType){const t={searchType:"TRADE",tradeType:te.tradeType,fromDate:te.fromDate,toDate:te.toDate,searchBy:te.searchBy,searchValue:te.searchValue,countryCode:te.countryCode,pageNumber:0,numberOfRecords:Math.round(e.maxDownload/xa),searchId:"",hsCodeList:xe,exporterList:oe,importerList:re,cityOriginList:Ue,cityDestinationList:Pe,portOriginList:ue,portDestinationList:je,orderByColumn:Me,orderByMode:Ve,matchType:te.matchType,hsCode4DigitList:Ze,queryBuilder:te.queryBuilder,shipModeList:Ge,stdUnitList:Ot};Object(u.a)({method:"POST",url:"search-management/search",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{let t=[];const a=te.countryCode.map((e=>e.toUpperCase())),r=(a.includes("IND"),a.includes("SEZ"),te.tradeType.toLowerCase());t="export"===r?e.data.expForeignList:"import"===r?e.data.impForeignList:[];let s=[];new Date;for(let i=0;i<t.length;i++){let e={},a=t[i];for(let t in a){a[t];null!=a[t]&&(e[t]=a[t])}s.push(e)}fa(s),_a(te,1,s)})).catch((e=>{console.log("Err == ",e),ee(!1)}))}else D.a.fire({title:"Alert!",text:"Please Search data first, then export",icon:"error",confirmButtonText:"OK"});else D.a.fire({title:"Alert!",text:`You cannot download more than ${Math.round(e.maxDownload/xa)} records in a single search. Please refine your search criteria.`,icon:"error",confirmButtonText:"OK"})},qa=t=>{e.download_count,t.length;let a=[],r=[];$.map(((e,r)=>{t.map(((t,r)=>{e.id==t&&a.push(e)}))}));for(let e=0;e<a.length;e++){let t={},s=a[e];for(let e in s){s[e];null!=s[e]&&(t[e]=s[e])}r.push(t)}fa(r),_a(te,2,r)},_a=(a,r,s)=>{let i=[],n=[],c=[];i=JSON.parse(JSON.stringify(e.downloadArray)),console.log("prevDownloadArray >>>>>>>>>>",i);for(let e=0;e<s.length;e++){let t=s[e];i.includes(t.id)?console.log("Download values found ========= ",t.id):(n.push(t.id),i.push(t.id),c.push(t))}const u=c.reduce(((e,t)=>{const a=oa.find((e=>e.value===t.ctry_code));return a?e+a.weightagePoints:e}),0),h=s.reduce(((e,t)=>{const a=oa.find((e=>e.value===t.ctry_code));return a?e+a.weightagePoints:e}),0);let p=e.download_count-u,m=e.download_count_subUser-h;const y=[];oa.forEach((e=>{const t=e.value,a=e.label,r=e.weightagePoints,i=s.filter((e=>e.ctry_code===t)).length,n=i*r;i>0&&y.push({countryName:a,weightagePoints:r,totalCount:i,totalWeightage:n})})),p>0&&(o.uplineId>0&&m>0||0==o.uplineId)?D.a.fire({title:"Download!",html:`Available Download <b>${o.uplineId>0?e.download_count_subUser:e.download_count}</b>. <br> Total Record to Download <b>${o.uplineId>0?s.length:n.length}</b>. \n        <br> Total Points to deduct <b>${o.uplineId>0?h:u}</b>.<br> Remaining Download <b>${o.uplineId>0?m:p}</b>. <br> Are you sure you want to Download ?`,icon:"warning",dangerMode:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((r=>{if(r.value){const r="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",u=".xlsx",h=a.tradeType+"_"+a.countryCode+"_"+a.fromDate+"_"+a.toDate,j={Sheets:{data:l.a.table_to_sheet(document.getElementById("reportXLS"),{header:1})},SheetNames:["data"]},b=l.b(j,{bookType:"xlsx",type:"array"}),O=new Blob([b],{type:r});d.saveAs(O,h+u),ee(!1);let L={searchId:Ee,downloadJson:JSON.stringify(y),recordsDownloaded:o.uplineId>0?s.length:n.length,initialCredit:o.uplineId>0?e.download_count_subUser:e.download_count,remainingCredit:o.uplineId>0?m:p};Ia(L),o.uplineId>0?e.setDloadCountSubuser({download_count_subUser:m}):e.updateSubscriptionCount({download_count:p,subscriptionId:e.subscriptionId,dataAccess_count:e.dataAccess_count,subUserCount:e.subUserCount,totalWorkspace:e.totalWorkspace,queryPerDay:e.queryPerDay}),n.length>0&&e.updateDownloadArrayCount({downloadArray:i}),Na({downloadLimit:p}),o.uplineId>0&&(c={downloadLimit:m},Object(T.a)({method:"PUT",url:`user-management/user/${t}`,data:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((e=>{console.log("user",e.data)})).catch((e=>{console.log("Err",e)}))),(t=>{e.downloadArray;const a={userId:g,downloadedRecords:t};Object(f.a)({method:"POST",url:"/activity-management/download-tracker/update",data:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((e=>{console.log("user",e.data)})).catch((e=>{console.log("Err",e)}))})(i),Qa(Ee,s.length)}var c})):D.a.fire({title:"Download!",text:"Your Download Limit Exhausted",icon:"error",dangerMode:!0,confirmButtonColor:"#3085d6"}).then((e=>{}))},Ia=e=>{Object(T.a)({method:"PUT",url:"download-log/save",data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{console.log("Download log res >>>",e.data)})).catch((e=>{console.log("Err",e)}))},Ra=function(t){console.log("params ---------- ",t),R(k),ee(!0),He(!0),"E"==t.tradeType||t.tradeType,Ta(1);let a=[];const r={searchType:t.searchType,tradeType:t.tradeType,fromDate:t.fromDate,toDate:t.toDate,searchBy:t.searchBy,searchValue:t.searchValue,countryCode:t.countryCode,pageNumber:0,numberOfRecords:W,hsCodeList:t.hsCodeList,exporterList:t.exporterList,importerList:t.importerList,cityOriginList:t.cityOriginList,cityDestinationList:t.cityDestinationList,portOriginList:t.portOriginList,portDestinationList:t.portDestinationList,orderByColumn:Me,orderByMode:Ve,hsCode4DigitList:t.hsCode4DigitList,matchType:t.matchType,queryBuilder:t.queryBuilder,shipModeList:t.shipmentModeList,stdUnitList:t.stdUnitList,rangeQuantityStart:t.rangeQuantityStart,rangeQuantityEnd:t.rangeQuantityEnd,consumptionType:t.consumptionType,rangeValueUsdStart:t.rangeValueUsdStart,rangeValueUsdEnd:t.rangeValueUsdEnd,rangeUnitPriceUsdStart:t.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:t.rangeUnitPriceUsdEnd,incoterm:t.incoterm,notifyParty:t.notifyParty,productDesc:t.productDesc,conditionProductDesc:t.conditionProductDesc};console.log("params.returnSearchId === ",N),t.returnSearchId&&(r.searchId=t.returnSearchId),!U||void 0!=N&&""!=N||t.isMainSearch||(r.searchId=U),Object(u.a)({method:"POST",url:"search-management/search",data:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((async s=>{e.setSearchQuery(r);const i=t.countryCode.map((e=>e.toUpperCase())),n=(i.includes("IND"),i.includes("SEZ"),t.tradeType.toLowerCase());if(a="export"===n?s.data.expForeignList:"import"===n?s.data.impForeignList:[],a&&a.length>0){J(a),ht(!1),Aa(t,s.data.searchId);let i=[],n=Object.keys(a[0]);for(var o in n)null!=a[0][n[o]]&&i.push(n[o]);st(i),we(s.data.searchId),1==t.searchFlag&&""==Me&&(e.updateSubscriptionCount({download_count:e.download_count,subscriptionId:e.subscriptionId,dataAccess_count:e.dataAccess_count,totalWorkspace:e.totalWorkspace,subUserCount:e.subUserCount,queryPerDay:e.queryPerDay-1}),Na({queryPerDay:e.queryPerDay-1})),Object(u.a)({method:"POST",url:"search-management/countrywisecount",data:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((e=>{let t=e.data.countryWiseCount.map((e=>{let{ctry_code:t,ctry_name:a,shipment_count:r}=e;return{label:`${a} (${r})`,value:t}}));Ca(t)})),Fa(t),$a(t),Ja(t),Wa(t),Ha(t),Ga(t),za(t),Xa(t),Ka(t),Za(t),ee(!1),await async function(e){try{let t="export"==e.tradeType.toLowerCase()?"export_purpose":"import_purpose";e.columnName=t,Object(u.a)({method:"POST",url:"/search-management/listdistinctcolumnvalue",data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{console.log("Column value >>> ",e.data.distinctColumnValuesList);let t=e.data.distinctColumnValuesList.map((e=>{let{column_name:t,records_count:a}=e;return{label:`${t} (${a})`,value:t}}));wt(t)}))}catch(t){console.log(t),wt([])}}(r),await async function(e){try{e.columnName="incoterm",Object(u.a)({method:"POST",url:"/search-management/listdistinctcolumnvalue",data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{console.log("Column value >>>2 ",e.data.distinctColumnValuesList);let t=e.data.distinctColumnValuesList;if(t&&t.length>0){let e=t.map((e=>{let{column_name:t,records_count:a}=e;return{label:`${t} (${a})`,value:t}}));qt(e)}else qt([])}))}catch(t){console.log(t),qt([])}}(r),await async function(e){try{e.columnName="notify_party_name",Object(u.a)({method:"POST",url:"/search-management/listdistinctcolumnvalue",data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{console.log("Column value >>> 3",e.data.distinctColumnValuesList);let t=e.data.distinctColumnValuesList.map((e=>{let{column_name:t,records_count:a}=e;return{label:`${t} (${a})`,value:t}}));Yt(t)}))}catch(t){console.log(t),Yt([])}}(r)}else J([]),ee(!1),K(0),st([]),ht(!0);e.loadingStop()})).catch((t=>{console.log("Err",t),we(""),J([]),ee(!1),st([]),e.loadingStop()}))},Ya=t=>{R(k),ee(!0),He(!0);let a=[];const r={searchType:"TRADE",tradeType:t.tradeType,fromDate:t.fromDate,toDate:t.toDate,searchBy:t.searchBy,searchValue:t.searchValue,countryCode:t.countryCode,pageNumber:X-1,numberOfRecords:W,searchId:Ee,hsCodeList:t.hsCodeList,exporterList:t.exporterList,importerList:t.importerList,cityOriginList:t.cityOriginList,cityDestinationList:t.cityDestinationList,portOriginList:t.portOriginList,portDestinationList:t.portDestinationList,orderByColumn:Me,orderByMode:Ve,hsCode4DigitList:t.hsCode4DigitList,matchType:t.matchType,queryBuilder:t.queryBuilder,shipModeList:t.shipmentModeList,stdUnitList:t.stdUnitList,rangeQuantityStart:t.rangeQuantityStart,rangeQuantityEnd:t.rangeQuantityEnd,consumptionType:t.consumptionType,rangeValueUsdStart:t.rangeValueUsdStart,rangeValueUsdEnd:t.rangeValueUsdEnd,rangeUnitPriceUsdStart:t.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:t.rangeUnitPriceUsdEnd,incoterm:t.incoterm,notifyParty:t.notifyParty,productDesc:t.productDesc,conditionProductDesc:t.conditionProductDesc};Object(u.a)({method:"POST",url:"search-management/search",data:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((r=>{const s=t.countryCode.map((e=>e.toUpperCase())),i=(s.includes("IND"),s.includes("SEZ"),t.tradeType.toLowerCase());if(a="export"===i?r.data.expForeignList:"import"===i?r.data.impForeignList:[],a&&a.length>0){J(a),ht(!1),Aa(t,r.data.searchId);let e=[],s=Object.keys(a[0]);for(var n in s)null!=a[0][s[n]]&&e.push(s[n]);st(e),we(r.data.searchId),ee(!1)}else J([]),ee(!1),K(0),st([]),ht(!0);e.loadingStop()})).catch((t=>{console.log("Err",t),we(""),J([]),ee(!1),st([]),e.loadingStop()}))},Aa=(e,t)=>{He(!0);const a={searchType:"TRADE",tradeType:e.tradeType,fromDate:e.fromDate,toDate:e.toDate,searchBy:e.searchBy,searchValue:e.searchValue,countryCode:e.countryCode,pageNumber:X-1,numberOfRecords:W,searchId:t,hsCodeList:e.hsCodeList,exporterList:e.exporterList,importerList:e.importerList,cityOriginList:e.cityOriginList,cityDestinationList:e.cityDestinationList,portOriginList:e.portOriginList,portDestinationList:e.portDestinationList,hsCode4DigitList:e.hsCode4DigitList,matchType:e.matchType,queryBuilder:e.queryBuilder,shipModeList:e.shipmentModeList,stdUnitList:e.stdUnitList,rangeQuantityStart:e.rangeQuantityStart,rangeQuantityEnd:e.rangeQuantityEnd,consumptionType:e.consumptionType,rangeValueUsdStart:e.rangeValueUsdStart,rangeValueUsdEnd:e.rangeValueUsdEnd,rangeUnitPriceUsdStart:e.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:e.rangeUnitPriceUsdEnd,incoterm:e.incoterm,notifyParty:e.notifyParty,productDesc:e.productDesc,conditionProductDesc:e.conditionProductDesc};console.log("111111111111111111111"),Object(u.a)({method:"POST",url:"/search-management/searchcount",data:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((e=>{K(e.data),ka(e.data,t),setTimeout(He(!1),1e3)})).catch((e=>{console.log("Err",e),K(0),ht(!0)}))},ka=(e,t)=>{const a={totalRecords:e};Object(u.a)({method:"PUT",url:`/search-management/updatesearchcount/${t}`,data:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((e=>{console.log("Res",e.data)})).catch((e=>{console.log("Err",e),K(0)}))},Qa=(e,t)=>{Object(u.a)({method:"PUT",url:`/search-management/downloadsearch?searchId=${e}&recordsDownloaded=${t}`,headers:{"Content-Type":"application/json"}}).then((e=>{console.log("Res",e.data)})).catch((e=>{console.log("Err",e)}))},Fa=e=>{Fe(!0);const t={searchType:"TRADE",tradeType:e.tradeType,fromDate:e.fromDate,toDate:e.toDate,searchBy:e.searchBy,searchValue:e.searchValue,countryCode:e.countryCode,pageNumber:X-1,numberOfRecords:W,matchType:e.matchType,portOriginList:e.portOriginList,portDestinationList:e.portDestinationList,hsCodeList:e.hsCodeList,hsCode4DigitList:e.hsCode4DigitList,exporterList:e.exporterList,importerList:e.importerList,cityOriginList:e.cityOriginList,cityDestinationList:e.cityDestinationList,searchId:Ee,queryBuilder:e.queryBuilder,shipModeList:e.shipmentModeList,stdUnitList:e.stdUnitList,rangeQuantityStart:e.rangeQuantityStart,rangeQuantityEnd:e.rangeQuantityEnd,consumptionType:e.consumptionType,rangeValueUsdStart:e.rangeValueUsdStart,rangeValueUsdEnd:e.rangeValueUsdEnd,rangeUnitPriceUsdStart:e.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:e.rangeUnitPriceUsdEnd,incoterm:e.incoterm,notifyParty:e.notifyParty,productDesc:e.productDesc,conditionProductDesc:e.conditionProductDesc};Object(u.a)({method:"POST",url:"/search-management/listimporters",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{let t=[];e.data.importersList&&e.data.importersList.forEach((e=>{let a={value:e.importer_name,label:e.importer_name+" ["+e.shipment_count+"]"};t.push(a)})),ne(t),Fe(!1)})).catch((e=>{console.log("Err"),ne([]),Fe(!1)}))},$a=e=>{Je(!0);const t={searchType:"TRADE",tradeType:e.tradeType,fromDate:e.fromDate,toDate:e.toDate,searchBy:e.searchBy,searchValue:e.searchValue,countryCode:e.countryCode,pageNumber:X-1,numberOfRecords:W,matchType:e.matchType,portOriginList:e.portOriginList,portDestinationList:e.portDestinationList,hsCodeList:e.hsCodeList,hsCode4DigitList:e.hsCode4DigitList,exporterList:e.exporterList,importerList:e.importerList,cityOriginList:e.cityOriginList,cityDestinationList:e.cityDestinationList,searchId:Ee,queryBuilder:e.queryBuilder,shipModeList:e.shipmentModeList,stdUnitList:e.stdUnitList,rangeQuantityStart:e.rangeQuantityStart,rangeQuantityEnd:e.rangeQuantityEnd,consumptionType:e.consumptionType,rangeValueUsdStart:e.rangeValueUsdStart,rangeValueUsdEnd:e.rangeValueUsdEnd,rangeUnitPriceUsdStart:e.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:e.rangeUnitPriceUsdEnd,incoterm:e.incoterm,notifyParty:e.notifyParty,productDesc:e.productDesc,conditionProductDesc:e.conditionProductDesc};Object(u.a)({method:"POST",url:"/search-management/listexporters",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{let t=[];e.data.exportersList&&e.data.exportersList.forEach((e=>{let a={value:e.exporter_name,label:e.exporter_name+" ["+e.shipment_count+"]"};t.push(a)})),le(t),Je(!1)})).catch((e=>{console.log("Err",e),le([]),Je(!1)}))},Ja=e=>{const t={searchType:"TRADE",tradeType:e.tradeType,fromDate:e.fromDate,toDate:e.toDate,searchBy:e.searchBy,searchValue:e.searchValue,countryCode:e.countryCode,pageNumber:X-1,numberOfRecords:W,matchType:e.matchType,portOriginList:e.portOriginList,portDestinationList:e.portDestinationList,hsCodeList:e.hsCodeList,hsCode4DigitList:e.hsCode4DigitList,exporterList:e.exporterList,importerList:e.importerList,cityOriginList:e.cityOriginList,cityDestinationList:e.cityDestinationList,searchId:Ee,queryBuilder:e.queryBuilder,shipModeList:e.shipmentModeList,stdUnitList:e.stdUnitList,rangeQuantityStart:e.rangeQuantityStart,rangeQuantityEnd:e.rangeQuantityEnd,consumptionType:e.consumptionType,rangeValueUsdStart:e.rangeValueUsdStart,rangeValueUsdEnd:e.rangeValueUsdEnd,rangeUnitPriceUsdStart:e.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:e.rangeUnitPriceUsdEnd,incoterm:e.incoterm,notifyParty:e.notifyParty,productDesc:e.productDesc,conditionProductDesc:e.conditionProductDesc};Object(u.a)({method:"POST",url:"/search-management/listindianports",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{let t=[];e.data.portsList&&e.data.portsList.forEach((e=>{let a={value:e.port_name,label:e.port_name+" ["+e.shipment_count+"]"};t.push(a)})),me(t)})).catch((e=>{console.log("Err",e),me([])}))},Wa=e=>{Ye(!0);const t={searchType:"TRADE",tradeType:e.tradeType,fromDate:e.fromDate,toDate:e.toDate,searchBy:e.searchBy,searchValue:e.searchValue,countryCode:e.countryCode,pageNumber:X-1,numberOfRecords:W,matchType:e.matchType,portOriginList:e.portOriginList,portDestinationList:e.portDestinationList,hsCodeList:e.hsCodeList,hsCode4DigitList:e.hsCode4DigitList,exporterList:e.exporterList,importerList:e.importerList,cityOriginList:e.cityOriginList,cityDestinationList:e.cityDestinationList,searchId:Ee,queryBuilder:e.queryBuilder,shipModeList:e.shipmentModeList,stdUnitList:e.stdUnitList,rangeQuantityStart:e.rangeQuantityStart,rangeQuantityEnd:e.rangeQuantityEnd,consumptionType:e.consumptionType,rangeValueUsdStart:e.rangeValueUsdStart,rangeValueUsdEnd:e.rangeValueUsdEnd,rangeUnitPriceUsdStart:e.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:e.rangeUnitPriceUsdEnd,incoterm:e.incoterm,notifyParty:e.notifyParty,productDesc:e.productDesc,conditionProductDesc:e.conditionProductDesc};Object(u.a)({method:"POST",url:"/search-management/listforeignports",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{let t=[];e.data.portsList&&e.data.portsList.forEach((e=>{let a={value:e.port_name,label:e.port_name+"["+e.shipment_count+"]"};t.push(a)})),ge(t),Ye(!1)})).catch((e=>{console.log("Err",e),ge([]),Ye(!1)}))},Ha=e=>{Ie(!0);const t={searchType:"TRADE",tradeType:e.tradeType,fromDate:c()(e.fromDate).format("YYYY-MM-DD"),toDate:c()(e.toDate).format("YYYY-MM-DD"),searchBy:e.searchBy?e.searchBy:"HS_CODE",searchValue:e.searchValue?e.searchValue:["2"],countryCode:e.countryCode,pageNumber:X-1,numberOfRecords:W,matchType:e.matchType?e.matchType:"L",portOriginList:e.portOriginList,portDestinationList:e.portDestinationList,hsCodeList:e.hsCodeList,hsCode4DigitList:e.hsCode4DigitList,exporterList:e.exporterList,importerList:e.importerList,cityOriginList:e.cityOriginList,cityDestinationList:e.cityDestinationList,searchId:Ee,queryBuilder:e.queryBuilder,shipModeList:e.shipmentModeList,stdUnitList:e.stdUnitList,rangeQuantityStart:e.rangeQuantityStart,rangeQuantityEnd:e.rangeQuantityEnd,consumptionType:e.consumptionType,rangeValueUsdStart:e.rangeValueUsdStart,rangeValueUsdEnd:e.rangeValueUsdEnd,rangeUnitPriceUsdStart:e.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:e.rangeUnitPriceUsdEnd,incoterm:e.incoterm,notifyParty:e.notifyParty,productDesc:e.productDesc,conditionProductDesc:e.conditionProductDesc};Object(u.a)({method:"POST",url:"/search-management/listhscodes",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{let t=[];e.data.hscodesList&&e.data.hscodesList.forEach((e=>{let a={value:e.hscode,label:e.hscode+" ["+e.shipment_count+"]"};t.push(a)})),Ce(t),Ie(!1)})).catch((e=>{console.log("Err",e),Ce([]),Ie(!1)}))},Xa=e=>{Ie(!0);const t={searchType:"TRADE",tradeType:e.tradeType,fromDate:e.fromDate,toDate:e.toDate,searchBy:e.searchBy,searchValue:e.searchValue,countryCode:e.countryCode,pageNumber:X-1,numberOfRecords:W,matchType:e.matchType,portOriginList:e.portOriginList,portDestinationList:e.portDestinationList,hsCodeList:e.hsCodeList,hsCode4DigitList:e.hsCode4DigitList,exporterList:e.exporterList,importerList:e.importerList,cityOriginList:e.cityOriginList,cityDestinationList:e.cityDestinationList,searchId:Ee,queryBuilder:e.queryBuilder,shipModeList:e.shipmentModeList,stdUnitList:e.stdUnitList,rangeQuantityStart:e.rangeQuantityStart,rangeQuantityEnd:e.rangeQuantityEnd,consumptionType:e.consumptionType,rangeValueUsdStart:e.rangeValueUsdStart,rangeValueUsdEnd:e.rangeValueUsdEnd,rangeUnitPriceUsdStart:e.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:e.rangeUnitPriceUsdEnd,incoterm:e.incoterm,notifyParty:e.notifyParty,productDesc:e.productDesc,conditionProductDesc:e.conditionProductDesc};Object(u.a)({method:"POST",url:"/search-management/listhscodes4digit",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{let t=[];e.data.hscodesList&&e.data.hscodesList.forEach((e=>{let a={value:e.hscode,label:e.hscode+" ["+e.shipment_count+"]"};t.push(a)})),at(t),Ie(!1)})).catch((e=>{console.log("Err",e),at([]),Ie(!1)}))},za=e=>{ke(!0);const t={searchType:"TRADE",tradeType:e.tradeType,fromDate:e.fromDate,toDate:e.toDate,searchBy:e.searchBy,searchValue:e.searchValue,countryCode:e.countryCode,pageNumber:X-1,numberOfRecords:W,matchType:e.matchType,portOriginList:e.portOriginList,portDestinationList:e.portDestinationList,hsCodeList:e.hsCodeList,hsCode4DigitList:e.hsCode4DigitList,exporterList:e.exporterList,importerList:e.importerList,cityOriginList:e.cityOriginList,cityDestinationList:e.cityDestinationList,searchId:Ee,queryBuilder:e.queryBuilder,shipModeList:e.shipmentModeList,stdUnitList:e.stdUnitList,rangeQuantityStart:e.rangeQuantityStart,rangeQuantityEnd:e.rangeQuantityEnd,consumptionType:e.consumptionType,rangeValueUsdStart:e.rangeValueUsdStart,rangeValueUsdEnd:e.rangeValueUsdEnd,rangeUnitPriceUsdStart:e.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:e.rangeUnitPriceUsdEnd,incoterm:e.incoterm,notifyParty:e.notifyParty,productDesc:e.productDesc,conditionProductDesc:e.conditionProductDesc};Object(u.a)({method:"POST",url:"/search-management/listforeigncountries",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{let t=[];e.data.countriesList&&e.data.countriesList.forEach((e=>{let a={value:e.country_name,label:e.country_name+" ["+e.shipment_count+"]"};t.push(a)})),Le(t),setTimeout(ke(!1),1e3)})).catch((e=>{console.log("Err"),Le([]),ke(!1)}))},Ga=e=>{const t={searchType:"TRADE",tradeType:e.tradeType,fromDate:e.fromDate,toDate:e.toDate,searchBy:e.searchBy,searchValue:e.searchValue,countryCode:e.countryCode,pageNumber:X-1,numberOfRecords:W,matchType:e.matchType,portOriginList:e.portOriginList,portDestinationList:e.portDestinationList,hsCodeList:e.hsCodeList,hsCode4DigitList:e.hsCode4DigitList,exporterList:e.exporterList,importerList:e.importerList,cityOriginList:e.cityOriginList,cityDestinationList:e.cityDestinationList,searchId:Ee,queryBuilder:e.queryBuilder,shipModeList:e.shipmentModeList,stdUnitList:e.stdUnitList,rangeQuantityStart:e.rangeQuantityStart,rangeQuantityEnd:e.rangeQuantityEnd,consumptionType:e.consumptionType,rangeValueUsdStart:e.rangeValueUsdStart,rangeValueUsdEnd:e.rangeValueUsdEnd,rangeUnitPriceUsdStart:e.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:e.rangeUnitPriceUsdEnd,incoterm:e.incoterm,notifyParty:e.notifyParty,productDesc:e.productDesc,conditionProductDesc:e.conditionProductDesc};Object(u.a)({method:"POST",url:"/search-management/listindiancities",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{let t=[];e.data.citiesList&&e.data.citiesList.forEach((e=>{let a={value:e.city_name,label:e.city_name+" ["+e.shipment_count+"]"};t.push(a)})),fe(t)})).catch((e=>{console.log("Err"),fe([])}))},Ka=e=>{const t={searchType:"TRADE",tradeType:e.tradeType,fromDate:e.fromDate,toDate:e.toDate,searchBy:e.searchBy,searchValue:e.searchValue,countryCode:e.countryCode,pageNumber:X-1,numberOfRecords:W,matchType:e.matchType,portOriginList:e.portOriginList,portDestinationList:e.portDestinationList,hsCodeList:e.hsCodeList,hsCode4DigitList:e.hsCode4DigitList,exporterList:e.exporterList,importerList:e.importerList,cityOriginList:e.cityOriginList,cityDestinationList:e.cityDestinationList,searchId:Ee,queryBuilder:e.queryBuilder,shipModeList:e.shipmentModeList,stdUnitList:e.stdUnitList,rangeQuantityStart:e.rangeQuantityStart,rangeQuantityEnd:e.rangeQuantityEnd,consumptionType:e.consumptionType,rangeValueUsdStart:e.rangeValueUsdStart,rangeValueUsdEnd:e.rangeValueUsdEnd,rangeUnitPriceUsdStart:e.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:e.rangeUnitPriceUsdEnd,incoterm:e.incoterm,notifyParty:e.notifyParty,productDesc:e.productDesc,conditionProductDesc:e.conditionProductDesc};Object(u.a)({method:"POST",url:"/search-management/listshipmentmode",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{let t=[];e.data.shipmentModeList&&e.data.shipmentModeList.forEach((e=>{let a={value:e.ship_mode,label:e.ship_mode};t.push(a)})),ze(t)})).catch((e=>{console.log("Err"),ze([])}))},Za=e=>{const t={searchType:"TRADE",tradeType:e.tradeType,fromDate:e.fromDate,toDate:e.toDate,searchBy:e.searchBy,searchValue:e.searchValue,countryCode:e.countryCode,pageNumber:X-1,numberOfRecords:W,matchType:e.matchType,portOriginList:e.portOriginList,portDestinationList:e.portDestinationList,hsCodeList:e.hsCodeList,hsCode4DigitList:e.hsCode4DigitList,exporterList:e.exporterList,importerList:e.importerList,cityOriginList:e.cityOriginList,cityDestinationList:e.cityDestinationList,searchId:Ee,queryBuilder:e.queryBuilder,shipModeList:e.shipmentModeList,stdUnitList:e.stdUnitList,rangeQuantityStart:e.rangeQuantityStart,rangeQuantityEnd:e.rangeQuantityEnd,consumptionType:e.consumptionType,rangeValueUsdStart:e.rangeValueUsdStart,rangeValueUsdEnd:e.rangeValueUsdEnd,rangeUnitPriceUsdStart:e.rangeUnitPriceUsdStart,rangeUnitPriceUsdEnd:e.rangeUnitPriceUsdEnd,incoterm:e.incoterm,notifyParty:e.notifyParty,productDesc:e.productDesc,conditionProductDesc:e.conditionProductDesc};Object(u.a)({method:"POST",url:"/search-management/liststdunit",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((e=>{let t=[];e.data.stdUnitList&&e.data.stdUnitList.forEach((e=>{let a={value:e.std_unit,label:e.std_unit};t.push(a)})),bt(t)})).catch((e=>{console.log("Err"),bt([])}))},er=e=>{if(e.portOriginList&&he(e.portOriginList),e.portDestinationList&&be(e.portDestinationList),e.hsCodeList&&Te(e.hsCodeList),e.hsCode4DigitList&&et(e.hsCode4DigitList),e.importerList&&se(e.importerList),e.exporterList&&ce(e.exporterList),e.cityOriginList&&ve(e.cityOriginList),e.cityDestinationList&&Ne(e.cityDestinationList),e.shipmentModeList&&Ke(e.shipmentModeList),e.stdUnitList&&Lt(e.stdUnitList),e.returnSearchId&&vt(e.returnSearchId),e.consumptionTypeList&&Nt(e.consumptionTypeList),e.incotermList&&Bt(e.incotermList),e.notifyPartyList&&It(e.notifyPartyList),te&&te.tradeType){let t=te;t.searchType="ADVANCE",t.portOriginList=e.portOriginList,t.portDestinationList=e.portDestinationList,t.hsCodeList=e.hsCodeList,t.importerList=e.importerList,t.exporterList=e.exporterList,t.cityOriginList=e.cityOriginList,t.cityDestinationList=e.cityDestinationList,t.hsCode4DigitList=e.hsCode4DigitList,t.shipmentModeList=e.shipmentModeList,t.stdUnitList=e.stdUnitList,t.searchFlag=!1,e.portOriginList&&(t.portOriginList=e.portOriginList),e.portDestinationList&&(t.portDestinationList=e.portDestinationList),e.hsCodeList&&(t.hsCodeList=e.hsCodeList),e.hsCode4DigitList&&(t.hsCode4DigitList=e.hsCode4DigitList),e.importerList&&(t.importerList=e.importerList),e.exporterList&&(t.exporterList=e.exporterList),e.cityOriginList&&(t.cityOriginList=e.cityOriginList),e.cityDestinationList&&(t.cityDestinationList=e.cityDestinationList),e.shipmentModeList&&(t.shipModeList=e.shipmentModeList),e.stdUnitList&&(t.stdUnitList=e.stdUnitList),e.minQuantity&&(t.rangeQuantityStart=e.minQuantity),e.maxQuantity&&(t.rangeQuantityEnd=e.maxQuantity),e.minValue&&(t.rangeValueUsdStart=e.minValue),e.maxValue&&(t.rangeValueUsdEnd=e.maxValue),e.minUnitPrice&&(t.rangeUnitPriceUsdStart=e.minUnitPrice),e.maxUnitPrice&&(t.rangeUnitPriceUsdEnd=e.maxUnitPrice),e.consumptionTypeList&&(t.consumptionType=e.consumptionTypeList),e.incotermList&&(t.incoterm=e.incotermList),e.notifyPartyList&&(t.notifyParty=e.notifyPartyList),e.descriptionList&&(t.conditionProductDesc=e.conditionProductDescription,t.productDesc=e.descriptionList),e.returnSearchId&&(t.returnSearchId=e.returnSearchId),ae(t),Ra(t)}F(!1)},tr=t=>{const a={workspace_id:"newWorkspace"==Qt.current.value?t:parseInt(Qt.current.value),search_id:Ee,name:At.current.value,description:kt.current.value,is_active:"Y"};Object(f.a)({method:"POST",url:"/activity-management/workspace/savesearch",data:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((t=>{e.updateSubscriptionCount({download_count:e.download_count,subscriptionId:e.subscriptionId,dataAccess_count:e.dataAccess_count,totalWorkspace:e.totalWorkspace-1,subUserCount:e.subUserCount,queryPerDay:e.queryPerDay}),Na({totalWorkspace:e.totalWorkspace-1}),D.a.fire({title:"Success",text:"Search query saved successfully",icon:"success"})})).catch((e=>{console.log("Err",e);let t="Somethhing went wrong, please try again.";e.data.errorMsg&&(t=e.data.errorMsg),D.a.fire({title:"Oops!",text:t,icon:"error"})})),Pa()};Object(r.useEffect)((()=>{Object(f.a)({method:"GET",url:`/activity-management/workspace/list?userId=${t}`}).then((e=>{sa(e.data.workspaceList)})).catch((e=>{console.log("Err",e)})),ir()}),[]);const ar=(e,t,a)=>{if(e&&e.length>=2){let r=[],s=[[],[],[]];const i={tradeType:t.tradeType,fromDate:t.fromDate,toDate:t.toDate,searchBy:""==a?t.searchBy:t.queryBuilder[a-1].searchBy,searchValue:e,countryCode:t.countryCode,matchType:""==a?t.matchType:t.queryBuilder[a-1].matchType};Object(u.a)({method:"POST",url:"/search-management/suggestionlist",data:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((e=>{e.data.suggestionList&&(e.data.suggestionList.map((e=>{let t={value:e.listSuggestion,label:e.listSuggestion};r.push(t)})),""==a?nt(r):(s[a-1]=r,console.log("query builder ========== ",s),ct(s)))})).catch((e=>{}))}},rr=e=>Object(_.jsx)(S.o.MenuList,{...e,children:e.children}),sr=t=>{Ht(t),Object(x.a)({method:"GET",url:`/masterdata-management/countrylistbycontinent/${t}`}).then((a=>{let r=[],s=[];a.data&&a.data.length>0&&(a.data.forEach((e=>{const a=e.continentName||"Unknown",i=e.continentId;e.countryList.filter((e=>e.continentId===i)).forEach((e=>{s.push({value:e.shortcode,label:e.name,iso2code:e.image,weightagePoints:"E"===t?e.exportPointWeightage:e.importPointWeightage,continentName:a,continentId:i});let n=Object.assign(e,{hasChild:!1});r.push(n)}))})),r=r.length>0&&e.countryList.length>0?r.filter((t=>e.countryList.includes(t.shortcode))):r,na(r),ca(s),console.log("Grouped MultiTradeCountryList >>>> ",s))})).catch((e=>{na([])}))},ir=()=>{if(U){let e=[],t=[];Object(u.a)({method:"GET",url:"/search-management/search/details",params:{searchId:U}}).then((a=>{if(a.data.queryList){let r=a.data.queryList[0].userSearchQuery;I={...I,tradeType:r.tradeType,matchType:r.matchType,searchBy:r.searchBy,searchValue:r.searchValue,countryCode:r.countryCode,fromDate:r.fromDate?new Date(r.fromDate):"",toDate:r.toDate?new Date(r.toDate):"",dateRange:U?"6":"",queryBuilder:r.queryBuilder?r.queryBuilder:[],cityDestinationList:r.cityDestinationList,cityOriginList:r.cityOriginList,exporterList:r.exporterList,hsCode4DigitList:r.hsCode4DigitList,hsCodeList:r.hsCodeList,importerList:r.importerList,portDestinationList:r.portDestinationList,portOriginList:r.portOriginList,shipmentModeList:r.shipModeList?r.shipModeList:[],stdUnitList:r.stdUnitList?r.stdUnitList:[],minQuantity:r.rangeQuantityStart?r.rangeQuantityStart:null,maxQuantity:r.rangeQuantityEnd?r.rangeQuantityEnd:null,consumptionTypeList:r.consumptionType?r.consumptionType:[],minValue:r.rangeValueUsdStart?r.rangeValueUsdStart:null,maxValue:r.rangeValueUsdEnd?r.rangeValueUsdEnd:null,minUnitPrice:r.rangeUnitPriceUsdStart?r.rangeUnitPriceUsdStart:null,maxUnitPrice:r.rangeUnitPriceUsdEnd?r.rangeUnitPriceUsdEnd:null,incotermList:r.incoterm?r.incoterm:[],notifyPartyList:r.notifyParty?r.notifyParty:[]},ft(r.countryCode),r.searchValue.map(((t,a)=>{let r={value:t,label:t};e.push(r)})),ha(e),r.queryBuilder&&r.queryBuilder.length>0&&r.queryBuilder.map(((e,a)=>{let r=[];e.searchValue.map(((e,t)=>{let a={value:e,label:e};r.push(a)})),t[a]=r})),ma(t),console.log("initialValues Start ======= ",I),lt(a.data.queryList[0].isDownloaded),gt(a.data.queryList[0].totalRecords),"IMPORT"==r.tradeType?nr("I",r.countryCode,r.tradeType,I):nr("E",r.countryCode,r.tradeType,I)}})).catch((e=>{console.log("Err",e)}))}},nr=(t,a,r,s)=>{Ht(t),Object(x.a)({method:"GET",url:`/masterdata-management/countrylistbycontinent/${t}`}).then((i=>{let n=[],o=[],d=[];if(i.data&&i.data.length>0){var l,u;i.data.forEach((e=>{const a=e.continentName||"Unknown",r=e.continentId;e.countryList.filter((e=>e.continentId===r)).forEach((e=>{o.push({value:e.shortcode,label:e.name,iso2code:e.image,weightagePoints:"E"===t?e.exportPointWeightage:e.importPointWeightage,continentName:a,continentId:r});let s=Object.assign(e,{hasChild:!1});n.push(s)}))})),n=n.length>0&&e.countryList.length>0?n.filter((t=>e.countryList.includes(t.shortcode))):n,na(n),ca(o);const h=n.filter((e=>a.some((t=>e.shortcode.toLowerCase()===t.toLowerCase()))));h.forEach((e=>{d.push({value:e.shortcode,label:e.name})})),la(d),Tt((null===(l=h[0])||void 0===l?void 0:l.importerForExport)||""),Ct((null===(u=h[0])||void 0===u?void 0:u.exporterForImport)||""),function(e,t,a){const r=a.filter((t=>e.some((e=>t.shortcode.toLowerCase()===e.toLowerCase()))));if(console.log("Temp Row On setDate >>> ",r),!r.length)return;let s="",i="";"I"===t?(s=c()(r[0].importFrom).format("MM-DD-YYYY"),i=c()(r[0].importUpto).format("MM-DD-YYYY")):(s=c()(r[0].exportFrom).format("MM-DD-YYYY"),i=c()(r[0].exportUpto).format("MM-DD-YYYY"));ba(new Date(s)),La(new Date(i)),new Date(i)}(a,r,n),""!==v?Ba(s,n,v):Ba(s,n)}})).catch((e=>{na([])}))};function or(e,t){if(!e||0===e.length)return void D.a.fire({title:"Error !",text:"Please select at least one country",icon:"error",confirmButtonColor:"#3085d6"});let a=[],r=[];if(e.forEach((e=>{let s=ia.find((t=>t.shortcode.toLowerCase()===e.value.toLowerCase()));s&&("I"===t?(a.push(c()(s.importFrom).toDate()),r.push(c()(s.importUpto).toDate())):(a.push(c()(s.exportFrom).toDate()),r.push(c()(s.exportUpto).toDate())))})),a.length>0&&r.length>0){let e=new Date(Math.min(...a)),t=new Date(Math.max(...r));return console.log("Min Date >>>>",e),console.log("Max Date >>> ",t),ba(e),La(t),t}}Object(r.useEffect)((()=>()=>{localStorage.removeItem("searchParam")}),[]);const cr=(t,a,r,s,i,n)=>Object(_.jsx)(h.b,{name:"queryBuilder",render:s=>Object(_.jsx)(_.Fragment,{children:t.queryBuilder&&t.queryBuilder.length>0?t.queryBuilder.map(((o,c)=>Object(_.jsxs)(n,{children:[Object(_.jsx)("div",{className:"col-md-2 pr-0 pb-2",children:Object(_.jsx)("div",{className:"input-search",children:Object(_.jsxs)(h.a,{name:`queryBuilder[${c}].relation`,component:"select",className:"hero__form-input form-control custom-select "+(r.matchType&&a.matchType?"is-invalid":""),autoComplete:"off",onChange:t=>{e.queryPerDay>0?(i(`queryBuilder[${c}].relation`,t.target.value),mt(!1)):e.queryPerDay<=0&&null!=e.queryPerDay&&dr()},children:[Object(_.jsx)("option",{value:"",children:"Select Relation"}),Object(_.jsx)("option",{value:"AND",children:"AND"})]})})}),Object(_.jsx)("div",{className:"col-md-2 pr-0 pb-2",children:Object(_.jsx)("div",{className:"input-search",children:Object(_.jsxs)(h.a,{name:`queryBuilder[${c}].searchBy`,component:"select",className:"hero__form-input form-control custom-select "+(r.searchBy&&a.searchBy?"is-invalid":""),autoComplete:"off",onChange:t=>{e.queryPerDay>0?("PRODUCT"==t.target.value?i(`queryBuilder[${c}].matchType`,"C"):i(`queryBuilder[${c}].matchType`,"L"),i(`queryBuilder[${c}].searchBy`,t.target.value),mt(!1),pa.length=1):e.queryPerDay<=0&&null!=e.queryPerDay&&dr()},children:[Object(_.jsx)("option",{value:"",children:"Select Type"}),Object(_.jsx)("option",{value:"HS_CODE",children:"HS Code"}),Object(_.jsx)("option",{value:"PRODUCT",children:"Product"}),"EXPORT"==t.tradeType&&"Y"==xt||"IMPORT"==t.tradeType?Object(_.jsx)("option",{value:"IMPORTER",children:"Importer"}):null,"IMPORT"==t.tradeType&&"Y"==St||"EXPORT"==t.tradeType?Object(_.jsx)("option",{value:"EXPORTER",children:"Exporter"}):null]})})}),Object(_.jsx)("div",{className:"col-md-2 pr-0 pb-2",children:Object(_.jsx)("div",{className:"input-search",children:Object(_.jsxs)(h.a,{name:`queryBuilder[${c}].matchType`,component:"select",className:"hero__form-input form-control custom-select "+(r.matchType&&a.matchType?"is-invalid":""),autoComplete:"off",onChange:t=>{e.queryPerDay>0?(i(`queryBuilder[${c}].matchType`,t.target.value),pa.length=1,mt(!1)):e.queryPerDay<=0&&null!=e.queryPerDay&&dr()},children:[Object(_.jsx)("option",{value:"",children:"Select"}),t.queryBuilder&&t.queryBuilder.length>0&&t.queryBuilder[c].hasOwnProperty("searchBy")&&"PRODUCT"==t.queryBuilder[c].searchBy?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("option",{value:"C",children:"Contains"}),Object(_.jsx)("option",{value:"D",children:"Does Not Contains"})," "]}):null,Object(_.jsx)("option",{value:"L",children:"Like"})]})})}),pa&&pa.length>0?Object(_.jsx)("div",{className:"col-md-4 pr-0 pb-3",children:Object(_.jsx)("div",{className:"input-search",children:Object(_.jsxs)(m.a,{children:[Object(_.jsx)(C.a,{placeholder:"Select an individual",name:`queryBuilder[${c}].searchValue`,options:ot[c],isMulti:!0,isOptionDisabled:()=>t.queryBuilder[c].searchValue&&t.queryBuilder[c].searchValue.length>=10,noOptionsMessage:()=>"name not found",components:{MenuList:rr},onInputChange:a=>e.queryPerDay>0?ar(a,t,c+1):null,onChange:t=>{if(e.queryPerDay>0){let e=[];mt(!1),t.forEach((t=>{e.push(t.value)})),i(`queryBuilder[${c}].searchValue`,e)}else e.queryPerDay<=0&&null!=e.queryPerDay&&dr()},defaultValue:pa[c]}),a.searchValue&&r.searchValue?Object(_.jsx)("span",{className:"errorMsg",children:a.searchValue}):null]})})}):null,Object(_.jsxs)("div",{className:"col-md-2 pr-0 pb-2",children:["HS_CODE_2"!=t.searchBy||t.queryBuilder.length>1?Object(_.jsx)("button",{type:"button",className:"btn btn-warning",onClick:()=>s.remove(c),children:"-"}):null,"\xa0\xa0",t.queryBuilder.length<3?Object(_.jsx)("button",{type:"button",className:"btn btn-warning",onClick:()=>s.push({relation:"",searchBy:"",matchType:"",searchValue:""}),children:"+"}):null]})]},c))):Object(_.jsx)("div",{className:"col-md-2 pr-0 pb-3",children:N?null:Object(_.jsx)("button",{type:"reset",className:"btn btn-warning",onClick:()=>s.push({relation:"",searchBy:"",matchType:"",searchValue:""}),children:"ADD"})})})}),dr=()=>{D.a.fire({title:"Search !",text:"Your Search Limit Exhausted",icon:"error",dangerMode:!0,confirmButtonColor:"#3085d6"})};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"container-fluid",children:[Object(_.jsx)("div",{className:"row",children:Object(_.jsxs)("div",{className:"col-md-12 list-page mt-3",children:[Object(_.jsxs)("div",{className:"search-top",children:[Object(_.jsx)("h5",{children:"Select Search Parameters"}),Object(_.jsx)(h.d,{enableReinitialize:!0,initialValues:I,validationSchema:A,onSubmit:t=>{if(console.log("values.searchValue >>>>>>>>>>>>>>>>>>>>>>>",t.searchValue),console.log("values >>>>>>>>>>>>>>>>>>>>>>>",t),t.searchValue&&t.searchValue.length>0){mt(!0),he([]),be([]),Te([]),et([]),se([]),ce([]),ve([]),Ne([]),Ke([]),Lt([]),t.isMainSearch=!0;let a=!1,r="";t.searchBy,t.searchValue.map(((e,t)=>{e.length<2&&(a=!0,r="Search Values should be greater than or equal to 2 digits")})),t.queryBuilder.length>0&&t.queryBuilder.map(((e,t)=>{"HS_CODE"==e.searchBy?e.searchValue.length>0&&e.searchValue.map(((e,t)=>{e.length<4&&(a=!0,r="Search Values should be greater than or equal to 4 digits")})):e.searchValue.length>0&&e.searchValue.map(((e,t)=>{e.length<2&&(a=!0,r="Search Values should be greater than or equal to 2 digits")}))})),1==a?D.a.fire({title:"Alert !",text:r,icon:"error",dangerMode:!0,confirmButtonColor:"#3085d6"}):(e.loadingStart(),Ba(t))}else D.a.fire({title:"Alert !",text:"Enter Search Values",icon:"error",dangerMode:!0,confirmButtonColor:"#3085d6"})},resetForm:!0,children:t=>{let{values:a,errors:s,setFieldValue:i,setFieldError:o,touched:d,isValid:l,handleSubmit:u,submitForm:p,setFieldTouched:y,resetForm:g}=t;return Object(_.jsxs)(h.c,{children:[Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-3 pr-0 pb-3",children:Object(_.jsxs)("div",{className:"input-search",children:[Object(_.jsxs)(h.a,{name:"tradeType",component:"select",className:"hero__form-input form-control custom-select "+(d.tradeType&&s.tradeType?"is-invalid":""),autoComplete:"off",value:a.tradeType,onChange:t=>{e.queryPerDay>0?(i("tradeType",t.target.value),i("countryCode",""),i("fromDate",""),i("toDate",""),i("dateRange",""),mt(!1),J([]),st([]),Be(""),qe("desc"),sr("IMPORT"==t.target.value?"I":"E")):e.queryPerDay<=0&&null!=e.queryPerDay&&dr()},children:[Object(_.jsx)("option",{value:"",children:"Select Trade"}),Object(_.jsx)("option",{value:"IMPORT",children:"Import"}),Object(_.jsx)("option",{value:"EXPORT",children:"Export"})]}),s.tradeType&&d.tradeType?Object(_.jsx)("span",{className:"errorMsg",children:s.tradeType}):null]})}),Object(_.jsxs)("div",{className:"col-md-3 pr-0 pb-3",children:[Object(_.jsx)(Y,{multiTradeCountryList:oa,selectedTradeCountry:da,setFieldValue:i,values:a,setSelectedTradeCountry:la,setMaxMinDate:or}),s.countryCode&&d.countryCode?Object(_.jsx)("span",{className:"errorMsg",children:s.countryCode}):null]}),Object(_.jsx)("div",{className:"col-md-2 pr-0 pb-3",children:Object(_.jsxs)("div",{className:"dropdown bootstrap-select hero__form-input",children:[Object(_.jsx)(h.a,{name:"dateRange",component:"select",className:"hero__form-input form-control custom-select "+(d.dateRange&&s.dateRange?"is-invalid":""),autoComplete:"off",value:a.dateRange,onChange:t=>{if(e.queryPerDay>0){e.loadingStart(),mt(!1),i("dateRange",t.target.value);let r=or(da,a.tradeType),s=c()(r).diff(c()(e.dataAccessUpto),"days")>0?e.dataAccessUpto:r,n="";if(a.countryCode.includes("IND")||a.countryCode.includes("SEZ")){const e=c()().diff(c()(s),"days")>0?s:new Date,t=new Date(e);t.setDate(1),n=c()(t).subtract(1,"days")}else n=c()().diff(c()(s),"days")>0?s:new Date;let o="",d="",l="";if(""!==n)switch(t.target.value){case"1":o=new Date(n),o.setDate(1),d=c()(o).diff(c()(e.dataAccessInMonth),"days"),i("fromDate",d>=0?new Date(o):new Date(e.dataAccessInMonth)),i("toDate",new Date(n)),e.loadingStop();break;case"2":l=c()(n).subtract(3,"months").add(5,"days").format("YYYY-MM-DD"),o=new Date(l),o.setDate(1),d=c()(o).diff(c()(e.dataAccessInMonth),"days"),i("fromDate",d>=0?new Date(o):new Date(e.dataAccessInMonth)),i("toDate",new Date(n)),e.loadingStop();break;case"3":l=c()(n).subtract(6,"months").add(5,"days").format("YYYY-MM-DD"),o=new Date(l),o.setDate(1),d=c()(o).diff(c()(e.dataAccessInMonth),"days"),i("fromDate",d>=0?new Date(o):new Date(e.dataAccessInMonth)),i("toDate",new Date(n)),e.loadingStop();break;case"4":l=c()(n).subtract(12,"months").add(5,"days").format("YYYY-MM-DD"),o=new Date(l),o.setDate(1),d=c()(o).diff(c()(e.dataAccessInMonth),"days"),i("fromDate",d>=0?new Date(o):new Date(e.dataAccessInMonth)),i("toDate",new Date(n)),e.loadingStop();break;case"5":l=c()(n).subtract(36,"months").add(5,"days").format("YYYY-MM-DD"),o=new Date(l),o.setDate(1),d=c()(o).diff(c()(e.dataAccessInMonth),"days"),i("fromDate",d>=0?new Date(o):new Date(e.dataAccessInMonth)),i("toDate",new Date(n)),e.loadingStop();break;default:i("toDate",""),i("fromDate",""),e.loadingStop()}}else e.queryPerDay<=0&&null!=e.queryPerDay&&dr()},children:(()=>{const e=[{value:"",label:"Choose Month Range"},{value:"1",label:"LAST 1 MONTH"},{value:"2",label:"LAST 3 MONTHS"},{value:"3",label:"LAST 6 MONTHS"}];return 1===da.length?(e.push({value:"4",label:"LAST 1 YEAR"}),e.push({value:"5",label:"LAST 3 YEAR"})):da.length>1&&e.push({value:"4",label:"LAST 1 YEAR"}),e.push({value:"6",label:"CUSTOM"}),e.map((e=>Object(_.jsx)("option",{value:e.value,children:e.label},e.value)))})()}),s.dateRange&&d.dateRange?Object(_.jsx)("span",{className:"errorMsg",children:s.dateRange}):null]})}),Object(_.jsx)("div",{className:"col-md-2 pr-0 pb-3",children:Object(_.jsxs)("div",{className:"input-search",children:[Object(_.jsx)(n.a,{name:"fromDate",dateFormat:"yyyy MMM dd  ",placeholderText:"From",peekPreviousMonth:!0,peekPreviousYear:!0,showMonthDropdown:!0,showYearDropdown:!0,minDate:c()(ja).diff(c()(e.dataAccessInMonth),"days")>0?new Date(ja):new Date(e.dataAccessInMonth),maxDate:null==e.dataAccessUpto||""==e.dataAccessUpto||c()(e.dataAccessUpto).diff(c()(Oa),"days")>0?new Date(Oa):new Date(e.dataAccessUpto),className:"form-control",dropdownMode:"select",onChange:t=>{e.queryPerDay>0?(i("fromDate",t),y("fromDate"),i("dateRange",6),mt(!1)):e.queryPerDay<=0&&null!=e.queryPerDay&&dr()},selected:a.fromDate}),s.fromDate&&d.fromDate?Object(_.jsx)("span",{className:"errorMsg",children:s.fromDate}):null]})}),Object(_.jsx)("div",{className:"col-md-2 pr-0 pb-3",children:Object(_.jsxs)("div",{className:"input-search",children:[Object(_.jsx)(n.a,{name:"toDate",dateFormat:"yyyy MMM dd  ",placeholderText:"To",peekPreviousMonth:!0,peekPreviousYear:!0,showMonthDropdown:!0,showYearDropdown:!0,minDate:c()(ja).diff(c()(e.dataAccessInMonth),"days")>0?new Date(ja):new Date(e.dataAccessInMonth),maxDate:null==e.dataAccessUpto||""==e.dataAccessUpto||c()(e.dataAccessUpto).diff(c()(Oa),"days")>0?new Date(Oa):new Date(e.dataAccessUpto),className:"form-control",dropdownMode:"select",onChange:t=>{e.queryPerDay>0?(i("toDate",t),y("toDate"),i("dateRange",6),mt(!1)):e.queryPerDay<=0&&null!=e.queryPerDay&&dr()},selected:a.toDate}),s.toDate&&d.toDate?Object(_.jsx)("span",{className:"errorMsg",children:s.toDate}):null]})})]}),Object(_.jsxs)("div",{className:"row",children:[Object(_.jsx)("div",{className:"col-md-3 pr-0 pb-3",children:Object(_.jsxs)("div",{className:"input-search",children:[Object(_.jsxs)(h.a,{name:"searchBy",component:"select",className:"hero__form-input form-control custom-select "+(d.searchBy&&s.searchBy?"is-invalid":""),autoComplete:"off",value:a.searchBy,onChange:t=>{e.queryPerDay>0?("PRODUCT"==t.target.value?i("matchType","C"):i("matchType","L"),ua.length=1,i("searchBy",t.target.value),mt(!1)):e.queryPerDay<=0&&null!=e.queryPerDay&&dr()},children:[Object(_.jsx)("option",{value:"",children:"Select Type"}),Object(_.jsx)("option",{value:"HS_CODE_2",children:"HS Code 2 digit"}),Object(_.jsx)("option",{value:"HS_CODE",children:"HS Code"}),Object(_.jsx)("option",{value:"PRODUCT",children:"Product"}),"EXPORT"==a.tradeType&&"Y"==xt||"IMPORT"==a.tradeType?Object(_.jsx)("option",{value:"IMPORTER",children:"Importer"}):null,"IMPORT"==a.tradeType&&"Y"==St||"EXPORT"==a.tradeType?Object(_.jsx)("option",{value:"EXPORTER",children:"Exporter"}):null]}),s.searchBy&&d.searchBy?Object(_.jsx)("span",{className:"errorMsg",children:s.searchBy}):null]})}),Object(_.jsx)("div",{className:"col-md-3 pr-0 pb-3",children:Object(_.jsxs)("div",{className:"input-search",children:[Object(_.jsxs)(h.a,{name:"matchType",component:"select",className:"hero__form-input form-control custom-select "+(d.matchType&&s.matchType?"is-invalid":""),autoComplete:"off",value:a.matchType,onChange:t=>{e.queryPerDay>0?(i("matchType",t.target.value),ua.length=1,mt(!1)):e.queryPerDay<=0&&null!=e.queryPerDay&&dr()},children:[Object(_.jsx)("option",{value:"",children:"Select"}),"PRODUCT"==a.searchBy?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("option",{value:"C",children:"Contains"}),Object(_.jsx)("option",{value:"D",children:"Does Not Contains"})," "]}):null,Object(_.jsx)("option",{value:"L",children:"Like"})]}),s.matchType&&d.matchType?Object(_.jsx)("span",{className:"errorMsg",children:s.matchType}):null]})}),ua&&ua.length>0?Object(_.jsx)("div",{className:"col-md-4 pr-0 pb-3",children:Object(_.jsx)("div",{className:"input-search",children:Object(_.jsxs)(m.a,{children:[Object(_.jsx)(C.a,{placeholder:"HS_CODE"===a.searchBy?"Enter min 4 digits":"Enter min 2 chars",name:"searchValue",options:it,isMulti:!0,isOptionDisabled:()=>a.searchValue&&a.searchValue.length>=10,noOptionsMessage:()=>"name not found",components:{MenuList:rr},onInputChange:t=>{e.queryPerDay>0&&ar(t,a,"")},onChange:t=>{if(e.queryPerDay>0){let e=[],r=!0;t.forEach((t=>{e.push(t.value),"HS_CODE"===a.searchBy&&t.value.length<4&&(r=!1)})),r?(i("searchValue",e),mt(!1)):D.a.fire({title:"Error!",text:"HS Code must be at least 4 digits.",icon:"error",confirmButtonColor:"#3085d6"})}else e.queryPerDay<=0&&null!=e.queryPerDay&&dr()},defaultValue:ua}),s.searchValue&&d.searchValue?Object(_.jsx)("span",{className:"errorMsg",children:s.searchValue}):null]})})}):null]}),Object(_.jsx)("div",{className:"row",children:cr(a,s,d,0,i,r.Fragment)}),N?null:Object(_.jsx)("div",{className:"row",children:Object(_.jsxs)("div",{className:"col-md-2 pr-0 pb-3",children:[Object(_.jsx)("button",{type:"reset",className:"btn btn-warning",onClick:e=>{((e,t)=>{ae([]),J([]),ha([]),ma([]),e("fromDate",""),e("toDate",""),e("searchValue",[]),e("countryCode",""),e("matchType",""),e("searchBy",""),e("tradeType",""),e("dateRange",""),st([]),K(0),t.tradeType="",t.searchBy="",t.matchType="",t.countryCode="",t.searchValue="",t.toDate="",t.fromDate="",t.dateRange="",ne([]),le([]),me([]),ge([]),Ce([]),at([]),Le([]),fe([]),ze([]),bt([]),localStorage.removeItem("searchParam"),we(""),ft(""),console.log("values === ",t)})(i,a)},children:"Reset"})," \xa0",Object(_.jsx)("button",{type:"submit",disabled:pt,onClick:e=>{e.preventDefault(),we(""),i("searchFlag",!0),u()},className:"btn btn-primary",children:"Search"})]})})]})}})]}),te&&te.tradeType&&$.length>0?Object(_.jsxs)("div",{className:"row searchCountBlk",children:[Object(_.jsx)("div",{className:"col-md-12 text-center",children:Object(_.jsxs)("h3",{children:["Search Result of ",te.tradeType.toLowerCase()," data from\xa0",c()(te.fromDate).format("DD-MMM-YYYY")," to ",c()(te.toDate).format("DD-MMM-YYYY")]})}),0==ut?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"col-lg-2 col-md-2 offset-md-1",children:Object(_.jsxs)("div",{className:"card",children:[Object(_.jsxs)("div",{className:"card-body bg-soft-primary",children:[Object(_.jsx)("div",{className:"avatar",children:Object(_.jsx)("span",{className:"avatar-title bg-soft-primary rounded",children:Object(_.jsx)("i",{className:"icon ion-ios-barcode text-primary font-size-24"})})}),Object(_.jsxs)("div",{className:"list-in",children:[Object(_.jsx)("p",{className:"text-muted mt-0 mb-0",children:"HSCODE"}),Object(_.jsx)("h4",{className:"mt-0 mb-0",children:Se.length})]})]}),_e&&Object(_.jsx)("div",{className:"loaderBox",children:Object(_.jsx)("div",{className:"loader"})})]})}),Object(_.jsx)("div",{className:"col-lg-2 col-md-2",children:Object(_.jsxs)("div",{className:"card",children:[Object(_.jsxs)("div",{className:"card-body bg-soft-success",children:[Object(_.jsx)("div",{className:"avatar",children:Object(_.jsx)("span",{className:"avatar-title bg-soft-success rounded",children:Object(_.jsx)("i",{className:"icon ion-md-filing text-primary font-size-24"})})}),Object(_.jsxs)("div",{className:"list-in",children:[Object(_.jsx)("p",{className:"text-muted mt-0 mb-0",children:"Total Shipment"}),Object(_.jsx)("h4",{className:"mt-0 mb-0",children:G})]})]}),We&&Object(_.jsx)("div",{className:"loaderBox",children:Object(_.jsx)("div",{className:"loader"})})]})}),Object(_.jsx)("div",{className:"col-lg-2 col-md-2",children:Object(_.jsxs)("div",{className:"card",children:[Object(_.jsxs)("div",{className:"card-body bg-soft-primary",children:[Object(_.jsx)("div",{className:"avatar",children:Object(_.jsx)("span",{className:"avatar-title bg-soft-primary rounded",children:Object(_.jsx)("i",{className:"icon ion-md-business text-primary font-size-24"})})}),Object(_.jsxs)("div",{className:"list-in",children:[Object(_.jsxs)("p",{className:"text-muted mt-0 mb-0",children:[" ","E"==Wt?"Country Of Destination":"Country Of Origin"]}),Object(_.jsx)("h4",{className:"mt-0 mb-0",children:Oe.length})]})]}),Re&&Object(_.jsx)("div",{className:"loaderBox",children:Object(_.jsx)("div",{className:"loader"})})]})}),"IMPORT"==te.tradeType&&"Y"==St||"EXPORT"==te.tradeType?Object(_.jsx)("div",{className:"col-lg-2 col-md-2",children:Object(_.jsxs)("div",{className:"card",children:[Object(_.jsxs)("div",{className:"card-body bg-soft-success",children:[Object(_.jsx)("div",{className:"avatar",children:Object(_.jsx)("span",{className:"avatar-title bg-soft-success rounded",children:Object(_.jsx)("i",{className:"icon ion-md-filing text-primary font-size-24"})})}),Object(_.jsxs)("div",{className:"list-in",children:[Object(_.jsx)("p",{className:"text-muted mt-0 mb-0",children:"Exporter"}),Object(_.jsx)("h4",{className:"mt-0 mb-0",children:de&&de.length})]})]}),$e&&Object(_.jsx)("div",{className:"loaderBox",children:Object(_.jsx)("div",{className:"loader"})})]})}):null,"EXPORT"==te.tradeType&&"Y"==xt||"IMPORT"==te.tradeType?Object(_.jsx)("div",{className:"col-lg-2 col-md-2",children:Object(_.jsxs)("div",{className:"card",children:[Object(_.jsxs)("div",{className:"card-body bg-soft-primary",children:[Object(_.jsx)("div",{className:"avatar",children:Object(_.jsx)("span",{className:"avatar-title bg-soft-primary rounded",children:Object(_.jsx)("i",{className:"icon ion-ios-business text-primary font-size-24"})})}),Object(_.jsxs)("div",{className:"list-in",children:[Object(_.jsx)("p",{className:"text-muted mt-0 mb-0",children:"Importer"}),Object(_.jsx)("h4",{className:"mt-0 mb-0",children:ie&&ie.length})]})]}),Qe&&Object(_.jsx)("div",{className:"loaderBox",children:Object(_.jsx)("div",{className:"loader"})})]})}):null]}):Object(_.jsxs)("div",{className:"col-lg-12 col-md-12 text-center",children:[Object(_.jsx)("p",{children:"\xa0"}),Object(_.jsx)("p",{children:"\xa0"}),Object(_.jsx)("img",{src:a(549).default}),Object(_.jsx)("h4",{children:Object(_.jsx)("p",{children:"Sorry we couldn't find any matches."})}),Object(_.jsx)("h2",{children:"Please Try Again"})]})]}):null,Object(_.jsx)(P.a,{children:Object(_.jsx)("div",{class:"ad-butt",children:Object(_.jsx)("button",{className:"btn btn-primary ad-butt-button",onClick:()=>F(!Q),children:Object(_.jsx)("i",{className:"icon ion-md-search text-light font-size-35"})})})}),Object(_.jsx)("div",{ref:k}),rt.length>0?"E"===Wt?Object(_.jsx)(b.a,{exportToCSV:Va,searchResult:$,limit:W,page:X,setPage:z,handleChangeLimit:Ma,totalRecord:G,searchLoading:Z,setOrderByColumn:Be,setOrderByMode:qe,orderByColumn:Me,orderByMode:Ve,setWorkspace:Ea,showModal:$t,filteredColumn:rt,saveQuery:wa,search_id:Ee||U,state:e.location.state,exportSelectedToCSV:qa,importerDataList:ie,countryCode:Dt,newColumnsKeys:e.location.state&&e.location.state.columnKeys?e.location.state.columnKeys:[],importerForExport:xt,exporterForImport:St,filterCountryList:Sa,multiTradeCountryList:oa,selectedTradeCountry:da}):Object(_.jsx)(j.a,{exportToCSV:Va,searchResult:$,limit:W,page:X,setPage:z,handleChangeLimit:Ma,totalRecord:G,searchLoading:Z,setOrderByColumn:Be,setOrderByMode:qe,orderByColumn:Me,orderByMode:Ve,setWorkspace:Ea,showModal:$t,filteredColumn:rt,saveQuery:wa,search_id:Ee||U,state:e.location.state,exportSelectedToCSV:qa,importerDataList:ie,countryCode:Dt,newColumnsKeys:e.location.state&&e.location.state.columnKeys?e.location.state.columnKeys:[],importerForExport:xt,exporterForImport:St,filterCountryList:Sa,multiTradeCountryList:oa,selectedTradeCountry:da}):ut?Object(_.jsx)("div",{children:Object(_.jsx)("h2",{children:"No records found"})}):null]})}),Q&&Object(_.jsx)(O.a,{toggleFromChild:F,importerDataList:ie,exporterDataList:de,portOriginDataList:pe,portDestinationDataList:ye,countryOriginList:Oe,countryDestinationList:De,hsCodeDataList:Se,shipmentModeDataList:Xe,shipmentModeList:Ge,type:te.tradeType,countryCode:te.countryCode,updateFilter:er,portOriginList:ue,portDestinationList:je,hsCodeList:xe,importerList:re,exporterList:oe,cityOriginList:Ue,cityDestinationList:Pe,hsCode4digitDataList:tt,hsCode4DigitList:Ze,fetchSearchQuery:ir,resetFilter:e=>{gt(0),lt("N"),er(e)},stdUnitList:Ot,stdUnitDataList:jt,searchId:Ee,importerForExport:xt,exporterForImport:St,consumptionType:Pt,consumptionTypeDataList:Et,incotermList:Mt,incotermDataList:Vt,notifyPartyList:_t,notifyPartyDataList:Rt})]}),Object(_.jsx)("div",{id:"reportXLS",hidden:!0,children:Da&&Da.length>0?Object(_.jsx)(M.a,{filteredArray:Da,tradeType:Wt,countryCode:Dt}):null}),Object(_.jsxs)(p.a,{show:$t,onHide:Pa,backdrop:"static",keyboard:!1,children:[Object(_.jsx)(p.a.Header,{closeButton:!0,children:Object(_.jsx)(p.a.Title,{children:"Save search"})}),Object(_.jsx)(p.a.Body,{children:Object(_.jsxs)("div",{className:"row",children:[Object(_.jsxs)("div",{className:"col-md-12",children:[Object(_.jsx)("label",{children:"Workspace:"}),Object(_.jsxs)("select",{className:"form-control",ref:Qt,onChange:e=>{(e=>{"newWorkspace"==e.target.value?ga(!0):ga(!1)})(e)},children:[Object(_.jsx)("option",{children:"--select--"}),Object(_.jsx)("option",{value:"newWorkspace",children:"Create New Workspace"}),ra.map(((e,t)=>Object(_.jsx)("option",{value:e.id,children:e.name},t)))]}),ta&&Object(_.jsx)("p",{className:"error",children:ta})]}),ya?Object(_.jsxs)("div",{className:"col-md-12",children:[Object(_.jsx)("label",{children:"New workspace name:"}),Object(_.jsx)("input",{type:"text",name:"title",ref:Ft,className:"form-control"}),Zt&&Object(_.jsx)("p",{className:"error",children:Zt})]}):null,Object(_.jsxs)("div",{className:"col-md-12",children:[Object(_.jsx)("label",{children:"Title:"}),Object(_.jsx)("input",{type:"text",name:"title",ref:At,className:"form-control"}),Xt&&Object(_.jsx)("p",{className:"error",children:Xt})]}),Object(_.jsxs)("div",{className:"col-md-12",children:[Object(_.jsx)("label",{children:"Description:"}),Object(_.jsx)("input",{type:"text",name:"title",ref:kt,className:"form-control"}),Gt&&Object(_.jsx)("p",{className:"error",children:Gt})]})]})}),Object(_.jsxs)(p.a.Footer,{children:[Object(_.jsx)(y.a,{variant:"secondary",onClick:Pa,children:"Close"}),Object(_.jsx)(y.a,{variant:"primary",onClick:()=>{(()=>{if(Qt.current.value&&"newWorkspace"==Qt.current.value)if(Qt.current.value&&Ft.current.value&&At.current.value&&kt.current.value){const e={name:Ft.current.value,is_active:"Y"};Object(f.a)({method:"POST",url:"/activity-management/workspace",data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{tr(e.data)})).catch((e=>{console.log("Err",e)}))}else Qt.current.value?aa(""):aa("Please select workspace name"),Ft.current.value?ea(""):ea("Please enter workspace name"),At.current.value?zt(""):zt("Please enter title"),kt.current.value?Kt(""):Kt("Please enter description");else Qt.current.value&&At.current.value&&kt.current.value?tr():(Qt.current.value&&"--select--"!=Qt.current.value?aa(""):aa("Please enter workspace name"),At.current.value?zt(""):zt("Please enter title"),kt.current.value?Kt(""):Kt("Please enter description"))})()},children:"Submit"})]})]})]})})))}}]);
//# sourceMappingURL=7.b775e539.chunk.js.map