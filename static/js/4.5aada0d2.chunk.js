(this.webpackJsonpbedatos_web=this.webpackJsonpbedatos_web||[]).push([[4],{925:function(e,t,a){"use strict";a.p},988:function(e,t,a){"use strict";a.r(t);var r=a(1),o=a(24),d=a(11),n=a.n(d),c=a(34),s=(a(925),a(929)),i=a(49),l=a(38),u=a(55),h=a(393),b=(a(392),a(363),a(19)),j=a.n(b),m=a(0);const p={cityDestinationList:"Destination City",cityOriginList:"City of Origin",exporterList:"Exporter List",hsCode4DigitList:"HS Code (4 Digit)",hsCodeList:"HS Code (8 Digit)",importerList:"Importer List",portDestinationList:"Destination Port",portOriginList:"Port of Origin",searchValue:"Search Value"};t.default=Object(c.i)(Object(u.b)((e=>({loading:e.loader.loading,download_count:e.data.download_count,subscriptionId:e.data.subscriptionId,dataAccess_count:e.data.dataAccess_count,totalWorkspace:e.data.totalWorkspace,subUserCount:e.data.subUserCount,queryPerDay:e.data.queryPerDay})),(e=>({loadingStart:()=>e(Object(i.a)()),loadingStop:()=>e(Object(i.b)()),updateSubscriptionCount:t=>e(Object(l.i)(t))})))((e=>{Object(c.g)();const t=localStorage.getItem("userToken");let a=localStorage.getItem("user");a=a?JSON.parse(a):{};const[d,i]=Object(r.useState)([]),[l,u]=Object(r.useState)([]),[b,O]=Object(r.useState)(void 0),[y,g]=Object(r.useState)(void 0),[S,w]=Object(r.useState)([]),[x,C]=Object(r.useState)(""),[D,T]=Object(r.useState)([]);Object(r.useEffect)((()=>{(()=>{let r="";r=a&&0==a.uplineId?"uplineId":"userId",e.loadingStart(),Object(o.a)({method:"GET",url:`search-management/search/listAll?${r}=${t}&isDownloaded=Y`}).then((t=>{let a=[];t.data.queryList&&t.data.queryList.length>0&&t.data.queryList.map(((e,t)=>{let r={};Object.keys(e).map(((t,a)=>{"userSearchQuery"!=t?r[t]=e[t]:Object.keys(e.userSearchQuery).map(((t,a)=>{r[t]=e.userSearchQuery[t],r.querySting=p?Object.keys(p).map(((t,a)=>"queryBuilder"==t&&e.userSearchQuery[t]?e.userSearchQuery[t].map(((e,a)=>`<b>${p[t]+(a+1)}</b> : <b>${p.relation}</b> : `+e.relation+" ,&nbsp "+`<b>${p.searchBy}</b> : `+e.searchBy+" ,&nbsp "+`<b>${p.searchValue}</b> : `+e.searchValue)):""!=e.userSearchQuery[t]&&null!=e.userSearchQuery[t]?`<b>&nbsp;${p[t]}</b> : `+e.userSearchQuery[t]:null)):null}))})),a.push(r)})),console.log("tempQueryList [======= ",a),i(a),u(a),e.loadingStop()})).catch((t=>{console.log("Err",t),e.loadingStop()}))})()}),[]);const f={sortName:b,sortOrder:y,onSortChange:function(e,t){O(e),g(t)}};return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"container-fluid",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-12 list-page mt-3",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:Object(m.jsx)("div",{className:"card",children:Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h4",{className:"card-title",children:"Download History"}),Object(m.jsx)("div",{children:Object(m.jsxs)(s.BootstrapTable,{data:d,striped:!0,hover:!0,pagination:!0,search:!0,options:f,children:[Object(m.jsx)(s.TableHeaderColumn,{width:"70",isKey:!0,dataField:"id",dataFormat:(e,t,a,r)=>Object(m.jsx)("div",{children:r+1}),children:"Sl No"}),Object(m.jsx)(s.TableHeaderColumn,{width:"100",dataField:"searchType",dataSort:!0,children:"Search Type"}),Object(m.jsx)(s.TableHeaderColumn,{width:"400",dataField:"querySting",dataFormat:(e,t,a,r)=>e.filter((e=>null!==e)),children:"Query"}),Object(m.jsx)(s.TableHeaderColumn,{width:"100",dataField:"tradeType",dataSort:!0,children:"Trade Type"}),Object(m.jsx)(s.TableHeaderColumn,{width:"100",dataField:"countryCode",dataSort:!0,children:"Country"}),Object(m.jsx)(s.TableHeaderColumn,{width:"150",dataField:"userSearchQuery",dataFormat:(e,t)=>n()(t.fromDate).format("MMM. DD, YYYY")+"-"+n()(t.toDate).format("MMM. DD, YYYY"),dataSort:!0,children:"Period"}),Object(m.jsx)(s.TableHeaderColumn,{width:"100",dataField:"totalRecords",dataSort:!0,children:"Total Records"}),a&&0==a.uplineId?Object(m.jsx)(s.TableHeaderColumn,{width:"200",dataField:"downloadedByName",dataFormat:(e,t)=>e+" [ "+t.downloadedByEmail+" ]",dataSort:!0,children:"Download By"}):null,Object(m.jsx)(s.TableHeaderColumn,{width:"200",dataField:"userSearchQuery",dataFormat:(e,t)=>n()(t.downloadedDate).format("MMM. DD, YYYY, h:mm:ss a"),dataSort:!0,children:"Download On"}),Object(m.jsx)(s.TableHeaderColumn,{width:"100",dataField:"recordsDownloaded",dataSort:!0,children:"Records"}),Object(m.jsx)(s.TableHeaderColumn,{width:"150",dataField:"searchId",dataFormat:(e,t)=>Object(m.jsx)("div",{className:"text-center",children:Object(m.jsx)("button",{onClick:()=>(e=>{e&&Object(o.a)({method:"GET",url:`download-log/get-log/${e}`,headers:{"Content-Type":"application/json"}}).then((e=>{if(e.data){let a=e.data[0],r=JSON.parse(a.downloadJson);console.log("LogData >>> ",r),j.a.fire({title:"Download Log",text:"Download Log Data",icon:"info",html:(t=r,`<table class="table">\n    <thead>\n      <tr>\n        <th scope="col">#</th>\n        <th scope="col">Country Name</th>\n        <th scope="col">Country Weightage</th>\n        <th scope="col"># of country</th>\n        <th scope="col">Total Point</th>\n      </tr>\n    </thead>\n    <tbody>\n      ${t.map(((e,t)=>`\n        <tr>\n          <td>${t+1}</th>\n          <td>${e.countryName}</td>\n          <td>${e.weightagePoints}</td>\n          <td>${e.totalCount}</td>\n          <td>${e.totalWeightage}</td>\n        </tr>\n      `)).join("")}\n    </tbody>\n  </table>`)})}var t})).catch((e=>{console.log("Err",e)}))})(e),className:"effect-btn btn btn-primary mt-2 mr-2 icon-lg",children:Object(m.jsx)("i",{className:"icon ion-md-eye"})})}),children:"Action"})]})})]})})})})})}),Object(m.jsx)("div",{id:"reportXLS",hidden:!0,children:D&&D.length>0?Object(m.jsx)(h.a,{filteredArray:D}):null})]})})})))}}]);
//# sourceMappingURL=4.5aada0d2.chunk.js.map