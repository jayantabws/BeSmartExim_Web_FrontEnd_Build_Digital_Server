(this.webpackJsonpbedatos_web=this.webpackJsonpbedatos_web||[]).push([[9],{988:function(e,a,t){"use strict";t.r(a);var s=t(1),i=t(40),l=t(11),r=t.n(l),o=(t(115),t(26)),c=t(27),n=t(20),d=t.n(n),m=t(0);const j=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,b={firstname:"",lastname:"",mobile:"",email:"",company_name:j.companyName,download_limit:0,password:"",isActive:""},h=c.b().shape({firstname:c.c().required("Please enter first name"),lastname:c.c().required("Please enter last name"),email:c.c().email().required("Please enter valid email address"),mobile:c.c().required("Please enter valid mobile no"),company_name:c.c().required("This field is required"),download_limit:c.c().required("This field is required"),password:c.c().required("This field is required"),isActive:c.c().required("This field is required")});var u=e=>{const a=Object.assign(b,{download_limit:e.download_count}),[t,l]=Object(s.useState)([]),[r,c]=Object(s.useState)([]);return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:Object(m.jsx)("div",{className:"card",children:Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("div",{className:"table-responsive",children:Object(m.jsx)(o.d,{initialValues:a,validationSchema:h,onSubmit:a=>{e.loaderStart();const t={firstname:a.firstname,lastname:a.lastname,email:a.email,mobile:a.mobile,companyName:a.company_name,downloadLimit:a.download_limit,userType:"USER",password:a.password,isActive:a.isActive,uplineId:j.userid};Number(a.download_limit)<=Number(e.download_count)?Object(i.a)({method:"POST",url:"user-management/user",data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((a=>{d.a.fire({title:"Thank You",text:"User created successfully",icon:"success"}).then((a=>{a&&(e.UpdateSubscription({subUserCount:e.subUserCount-1}),e.OnUserCreate(),e.loaderStop())}))})).catch((e=>{console.log("Err",e);let a="Somethhing went wrong, please try again.";e.data.errorMsg&&(a=e.data.errorMsg),d.a.fire({title:"Oops!",text:a,icon:"error"})})):d.a.fire({title:"Oops!",text:"Download Limit should be less than total limit",icon:"error"})},children:e=>{let{values:a,errors:t,setFieldValue:s,setFieldError:i,touched:l,isValid:r,handleSubmit:c,submitForm:n}=e;return Object(m.jsxs)(o.c,{children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"First Name"})}),Object(m.jsx)(o.a,{name:"firstname",type:"text",className:"form-control "+(l.firstname&&t.firstname?"is-invalid":""),placeholder:"First Name",autoComplete:"off",onChange:e=>{s("firstname",e.target.value)}}),l.firstname&&t.firstname&&Object(m.jsx)("p",{className:"error",children:t.firstname})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Last Name"})}),Object(m.jsx)(o.a,{name:"lastname",type:"text",className:"form-control "+(l.lastname&&t.lastname?"is-invalid":""),placeholder:"Last Name",autoComplete:"off",onChange:e=>{s("lastname",e.target.value)}}),l.lastname&&t.lastname&&Object(m.jsx)("p",{className:"error",children:t.lastname})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Email"})}),Object(m.jsx)(o.a,{name:"email",type:"text",className:"form-control "+(l.email&&t.email?"is-invalid":""),placeholder:"Email Address",autoComplete:"off",onChange:e=>{s("email",e.target.value)}}),l.email&&t.email&&Object(m.jsx)("p",{className:"error",children:t.email})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Mobile"})}),Object(m.jsx)(o.a,{name:"mobile",type:"text",className:"form-control "+(l.mobile&&t.mobile?"is-invalid":""),placeholder:"Mobile No",autoComplete:"off",onChange:e=>{s("mobile",e.target.value)}}),l.mobile&&t.mobile&&Object(m.jsx)("p",{className:"error",children:t.mobile})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Password"})}),Object(m.jsx)(o.a,{name:"password",type:"password",className:"form-control "+(l.password&&t.password?"is-invalid":""),placeholder:"Password",autoComplete:"off",onChange:e=>{s("password",e.target.value)}}),l.password&&t.password&&Object(m.jsx)("p",{className:"error",children:t.password})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Company Name"})}),Object(m.jsx)(o.a,{name:"company_name",type:"text",className:"form-control "+(l.company_name&&t.company_name?"is-invalid":""),placeholder:"Company Name",autoComplete:"off",onChange:e=>{s("company_name",e.target.value)}}),l.company_name&&t.company_name&&Object(m.jsx)("p",{className:"error",children:t.company_name})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Assigned Download Limit"})}),Object(m.jsx)(o.a,{name:"download_limit",type:"text",className:"form-control "+(l.download_limit&&t.download_limit?"is-invalid":""),placeholder:"Download Limit",autoComplete:"off",onChange:e=>{s("download_limit",e.target.value)}}),l.download_limit&&t.download_limit&&Object(m.jsx)("p",{className:"error",children:t.download_limit})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Status"})}),Object(m.jsxs)(o.a,{name:"isActive",component:"select",className:"form-control "+(l.isActive&&t.isActive?"is-invalid":""),autoComplete:"off",onChange:e=>{s("isActive",e.target.value)},children:[Object(m.jsx)("option",{value:"",children:"Please Select"}),Object(m.jsx)("option",{value:"Y",children:"ACTIVE"}),Object(m.jsx)("option",{value:"N",children:"IN-ACTIVE"}),l.isActive&&t.isActive&&Object(m.jsx)("p",{className:"error",children:t.isActive})]})]}),Object(m.jsx)("button",{type:"submit",onClick:e=>{e.preventDefault(),c()},className:"btn btn-primary",children:"Create Account"})]})}})})})})})})})};const p=c.b().shape({firstname:c.c().required("Please enter first name"),lastname:c.c().required("Please enter last name"),email:c.c().email().required("Please enter valid email address"),mobile:c.c().required("Please enter valid mobile no"),companyName:c.c().required("This field is required"),downloadLimit:c.c().required("This field is required"),isActive:c.c().required("This field is required"),password:c.c().required("This field is required")});var O=e=>{const a={firstname:e.rowData.firstname,lastname:e.rowData.lastname,mobile:e.rowData.mobile,email:e.rowData.email,companyName:e.rowData.companyName,downloadLimit:e.download_count,isActive:e.rowData.isActive,password:e.rowData.password},[t,l]=Object(s.useState)([]);return Object(s.useEffect)((()=>{}),[]),Object(m.jsx)("div",{children:Object(m.jsx)(o.d,{initialValues:a,validationSchema:p,onSubmit:a=>{const t={firstname:a.firstname,lastname:a.lastname,email:a.email,mobile:a.mobile,companyName:a.companyName,downloadLimit:a.downloadLimit,isActive:a.isActive,password:a.password};console.log("Props ==== ",e),a.downloadLimit<=e.download_count?Object(i.a)({method:"PUT",url:`user-management/user/${e.rowData.id}`,data:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((a=>{console.log("user",a.data),d.a.fire({title:"Thank You",text:"User update is successful",icon:"success"}).then((()=>{e.modalSubmit()}))})).catch((e=>{console.log("Err",e);let a="Somethhing went wrong, please try again.";e.data.errorMsg&&(a=e.data.errorMsg),d.a.fire({title:"Oops!",text:a,icon:"error"})})):d.a.fire({title:"Oops!",text:"Download Limit should be less than total limit",icon:"error"})},children:e=>{let{values:a,errors:t,setFieldValue:s,setFieldError:i,touched:l,isValid:r,handleSubmit:c,submitForm:n}=e;return Object(m.jsxs)(o.c,{children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"First Name"})}),Object(m.jsx)(o.a,{name:"firstname",type:"text",className:"form-control "+(l.firstname&&t.firstname?"is-invalid":""),placeholder:"First Name",onChange:e=>{s("firstname",e.target.value)}}),l.firstname&&t.firstname&&Object(m.jsx)("p",{className:"error",children:t.firstname})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Last Name"})}),Object(m.jsx)(o.a,{name:"lastname",type:"text",className:"form-control "+(l.lastname&&t.lastname?"is-invalid":""),placeholder:"Last Name",onChange:e=>{s("lastname",e.target.value)}}),l.lastname&&t.lastname&&Object(m.jsx)("p",{className:"error",children:t.lastname})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Email"})}),Object(m.jsx)(o.a,{name:"email",type:"text",className:"form-control "+(l.email&&t.email?"is-invalid":""),placeholder:"Email Address",onChange:e=>{s("email",e.target.value)}}),l.email&&t.email&&Object(m.jsx)("p",{className:"error",children:t.email})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Mobile"})}),Object(m.jsx)(o.a,{name:"mobile",type:"text",className:"form-control "+(l.mobile&&t.mobile?"is-invalid":""),placeholder:"Mobile No",onChange:e=>{s("mobile",e.target.value)}}),l.mobile&&t.mobile&&Object(m.jsx)("p",{className:"error",children:t.mobile})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Password"})}),Object(m.jsx)(o.a,{name:"password",type:"password",className:"form-control "+(l.password&&t.password?"is-invalid":""),placeholder:"Password",onChange:e=>{s("password",e.target.value)}}),l.password&&t.password&&Object(m.jsx)("p",{className:"error",children:t.password})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Company Name"})}),Object(m.jsx)(o.a,{name:"companyName",type:"text",className:"form-control "+(l.companyName&&t.companyName?"is-invalid":""),placeholder:"Company Name",onChange:e=>{s("companyName",e.target.value)}}),l.companyName&&t.companyName&&Object(m.jsx)("p",{className:"error",children:t.companyName})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Assigned Download Limit"})}),Object(m.jsx)(o.a,{name:"downloadLimit",type:"text",className:"form-control "+(l.downloadLimit&&t.downloadLimit?"is-invalid":""),placeholder:"Download Limit",onChange:e=>{s("downloadLimit",e.target.value)}}),l.downloadLimit&&t.downloadLimit&&Object(m.jsx)("p",{className:"error",children:t.downloadLimit})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{children:Object(m.jsx)("b",{children:"Status"})}),Object(m.jsxs)(o.a,{name:"isActive",component:"select",className:"form-control "+(l.isActive&&t.isActive?"is-invalid":""),autoComplete:"off",onChange:e=>{s("isActive",e.target.value)},children:[Object(m.jsx)("option",{value:"",children:"Please Select"}),Object(m.jsx)("option",{value:"Y",children:"Active"}),Object(m.jsx)("option",{value:"N",children:"Inactive"}),l.isActive&&t.isActive&&Object(m.jsx)("p",{className:"error",children:t.isActive})]})]}),Object(m.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Update User"})]})}})})},x=t(32),f=t(49),v=t(38),N=t(55),g=t(34);a.default=Object(g.i)(Object(N.b)((e=>({loading:e.loader.loading,download_count:e.data.download_count,subscriptionId:e.data.subscriptionId,dataAccess_count:e.data.dataAccess_count,totalWorkspace:e.data.totalWorkspace,subUserCount:e.data.subUserCount})),(e=>({loadingStart:()=>e(Object(f.a)()),loadingStop:()=>e(Object(f.b)()),updateSubscriptionCount:a=>e(Object(v.i)(a))})))((function(e){const a=localStorage.getItem("userToken"),t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,[l,o]=Object(s.useState)([]),[c,n]=Object(s.useState)([]),[j,b]=Object(s.useState)(!1),[h,p]=Object(s.useState)(!1),[f,v]=Object(s.useState)(!1),N=()=>{e.loadingStart();let s=[{firstname:t.firstname,lastname:t.lastname,email:t.email,mobile:t.mobile,isActive:t.isActive,createdDate:t.createdDate?r()(t.createdDate).format("YYYY-MM-DD"):null,id:t.userid}],l=[{firstname:t.firstname,lastname:t.lastname,email:t.email,mobile:t.mobile,isActive:t.isActive,createdDate:t.createdDate?r()(t.createdDate).format("YYYY-MM-DD"):null,password:t.password,companyName:t.companyName,id:t.userid}];Object(i.a)({method:"GET",url:`user-management/user/list?uplineId=${a}`}).then((a=>{a.data.userList.forEach((e=>{let a={firstname:e.firstname,lastname:e.lastname,email:e.email,mobile:e.mobile,isActive:e.isActive,createdDate:e.createdDate?r()(e.createdDate).format("YYYY-MM-DD"):null,password:e.password,companyName:e.companyName,downloadLimit:e.downloadLimit,id:e.id};s.push(a),l.push(a)})),o(s),n(l),e.loadingStop()})).catch((a=>{console.log("Err",a),e.loadingStop()}))},g=()=>{b(!1)};return Object(s.useEffect)((()=>{N()}),[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"container-fluid",children:[Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-md-12 list-page mt-3",children:[Object(m.jsxs)("div",{className:"search-ar mt-2 mb-2",children:[Object(m.jsx)("h2",{className:"headl",children:"Users"}),"\xa0\xa0",Object(m.jsx)("button",{onClick:a=>{a.target.value,e.subUserCount>0?d.a.fire({title:"Create User !",text:`Available Limit ${e.subUserCount}. \n Are you sure you want to Create New User ?`,icon:"warning",dangerMode:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((e=>{e.value&&b(!0)})):d.a.fire({title:"Create User !",text:"Your User Limit Exhausted",icon:"error",dangerMode:!0,confirmButtonColor:"#3085d6"}).then((e=>{}))},children:"Add User"}),Object(m.jsx)("div",{className:"wrap float-right",children:Object(m.jsxs)("div",{className:"search",children:[Object(m.jsx)("input",{type:"text",onChange:e=>{(e=>{console.log("text",e);let a=l.filter((a=>a.firstname.toLowerCase().includes(e.toLowerCase())||a.lastname.toLowerCase().includes(e.toLowerCase())));n(a)})(e.target.value)},className:"searchTerm",placeholder:"What are you looking for?"}),Object(m.jsx)("button",{type:"submit",className:"searchButton",children:Object(m.jsx)("i",{className:"icon ion-md-search"})})]})})]}),Object(m.jsxs)("table",{className:"table table-striped table-hover",children:[Object(m.jsx)("thead",{className:"",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"SL No."}),Object(m.jsx)("th",{children:"Firstname"}),Object(m.jsx)("th",{children:"Last Name"}),Object(m.jsx)("th",{children:"Company Name"}),Object(m.jsx)("th",{children:"Email Id"}),Object(m.jsx)("th",{children:"Mobile"}),Object(m.jsx)("th",{children:"Available Download Limit"}),Object(m.jsx)("th",{children:"Status"}),Object(m.jsx)("th",{children:"Created On"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:c.length>0?c.map(((e,a)=>Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{children:[a+1,"."]}),Object(m.jsx)("td",{children:e.firstname}),Object(m.jsx)("td",{children:e.lastname?e.lastname:""}),Object(m.jsx)("td",{children:e.companyName?e.companyName:""}),Object(m.jsx)("td",{children:e.email?e.email:""}),Object(m.jsx)("td",{children:e.mobile?e.mobile:""}),Object(m.jsx)("td",{children:e.downloadLimit?e.downloadLimit:""}),Object(m.jsx)("td",{children:e.isActive&&"Y"==e.isActive?"Active":"Inactive"}),Object(m.jsx)("td",{children:e.createdDate?e.createdDate:""}),Object(m.jsxs)("td",{children:[a>=1?Object(m.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>{var a;a=e.id,d.a.fire({title:"Remove",text:" Are you sure you want to Remove the user?",icon:"warning",dangerMode:!0,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then((e=>{if(e.isConfirmed){const e={isDelete:"Y"};Object(i.a)({method:"PUT",url:`user-management/deleteuser/${a}`,data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{d.a.fire({title:"Remove",text:" User removed successfully",icon:"success"}).then(N())})).catch((e=>{console.log("Err",e)}))}}))},children:Object(m.jsx)("i",{className:"icon ion-ios-trash"})}):null," \xa0",Object(m.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>{(e=>{p(!0),v(e)})(e)},children:Object(m.jsx)("i",{className:"fa fa-pencil"})})]})]},a))):Object(m.jsx)("tr",{children:Object(m.jsx)("td",{colSpan:"7",style:{textAlign:"center"},children:"No record found"})})})]})]})}),Object(m.jsx)("div",{children:j?Object(m.jsxs)(x.a,{className:"",bssize:"md",show:j,onHide:g,children:[Object(m.jsx)(x.a.Header,{closeButton:!0,children:" Create User "}),Object(m.jsx)(x.a.Title,{children:"  "}),Object(m.jsx)(x.a.Body,{style:{height:"80vh",overflow:"auto",scrollbarWidth:"10px"},children:Object(m.jsx)("div",{children:Object(m.jsx)(u,{UpdateSubscription:a=>{Object(i.a)({method:"PUT",url:`user-management/user-subscription/update/${e.subscriptionId}`,data:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((a=>{e.updateSubscriptionCount({download_count:e.download_count,subscriptionId:e.subscriptionId,dataAccess_count:e.dataAccess_count,totalWorkspace:e.totalWorkspace,subUserCount:e.subUserCount-1})})).catch((e=>{console.log("Err",e)}))},OnUserCreate:()=>{g(),N()},subUserCount:e.subUserCount,download_count:e.download_count,subscriptionId:e.subscriptionId,loaderStart:e.loadingStart,loaderStop:e.loadingStop})})})]}):null}),Object(m.jsx)("div",{children:h?Object(m.jsxs)(x.a,{className:"",bssize:"md",show:h,onHide:()=>{p(!1)},children:[Object(m.jsx)(x.a.Header,{closeButton:!0,children:" Edit User "}),Object(m.jsx)(x.a.Title,{children:"  "}),Object(m.jsx)(x.a.Body,{style:{height:"80vh",overflow:"auto",scrollbarWidth:"10px"},children:Object(m.jsx)("div",{children:Object(m.jsx)(O,{rowData:f,download_count:e.download_count,modalSubmit:e=>{b(!1),p(!1),N()}})})})]}):null})]})})})))}}]);
//# sourceMappingURL=9.a9918c2b.chunk.js.map