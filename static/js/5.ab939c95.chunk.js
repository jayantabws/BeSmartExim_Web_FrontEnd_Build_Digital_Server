(this.webpackJsonpbedatos_web=this.webpackJsonpbedatos_web||[]).push([[5],{923:function(e,t,a){"use strict";a.p},985:function(e,t,a){"use strict";a.r(t);var r=a(1),i=a(25),s=a(11),c=a.n(s),n=a(34),d=(a(923),a(927)),o=a(49),l=a(38),u=a(55),b=a(0);const h={cityDestinationList:"Destination City",cityOriginList:"City of Origin",exporterList:"Exporter List",hsCode4DigitList:"HS Code (4 Digit)",hsCodeList:"HS Code (8 Digit)",importerList:"Importer List",portDestinationList:"Destination Port",portOriginList:"Port of Origin",rangeQuantityStart:"Minimum Quantity",rangeQuantityEnd:"Maximun Quantity",rangeValueUsdStart:"Minimum Value (in USD)",rangeValueUsdEnd:"Maximun Value (in USD)",rangeUnitPriceUsdStart:"Minimum Unit Price (in USD)",rangeUnitPriceUsdEnd:"Maximun Unit Price (in USD)",consumptionType:"Consumption Type",incoterm:"Incoterm",notifyParty:"Notify Party",searchValue:"Search Value",relation:"Relation",searchBy:"Search By",queryBuilder:"Additional"};t.default=Object(n.i)(Object(u.b)((e=>({loading:e.loader.loading,download_count:e.data.download_count,subscriptionId:e.data.subscriptionId,dataAccess_count:e.data.dataAccess_count,totalWorkspace:e.data.totalWorkspace,subUserCount:e.data.subUserCount,queryPerDay:e.data.queryPerDay})),(e=>({loadingStart:()=>e(Object(o.a)()),loadingStop:()=>e(Object(o.b)()),updateSubscriptionCount:t=>e(Object(l.i)(t))})))((e=>{const t=Object(n.g)(),a=localStorage.getItem("userToken");let s=localStorage.getItem("user");s=s?JSON.parse(s):{};const[o,l]=Object(r.useState)([]),[u,j]=Object(r.useState)([]),[m,y]=Object(r.useState)(void 0),[p,O]=Object(r.useState)(void 0),[S,g]=Object(r.useState)(0),[x]=Object(r.useState)(10),[C,f]=Object(r.useState)(!0),[T,D]=Object(r.useState)(0);Object(r.useEffect)((()=>{(()=>{let e=s&&0==s.uplineId?"uplineId":"userId";Object(i.a)({method:"GET",url:`search-management/search/countAll?${e}=${a}`}).then((e=>{console.log("Count Res > >>",e),e.data&&200===e.status&&D(e.data)})).catch((e=>{console.log("Count Error",e)}))})()}),[]),Object(r.useEffect)((()=>{T>0&&function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r="";r=s&&0==s.uplineId?"uplineId":"userId",e.loadingStart(),Object(i.a)({method:"GET",url:`search-management/search/listAll?${r}=${a}&page=${t}&size=${x}`}).then((a=>{let r=[];a.data.queryList&&a.data.queryList.length>0&&a.data.queryList.map(((e,t)=>{let a={};Object.keys(e).map(((t,r)=>{"userSearchQuery"!=t?a[t]=e[t]:Object.keys(e.userSearchQuery).map(((t,r)=>{"searchId"!=t&&(a[t]=e.userSearchQuery[t],a.querySting=h?Object.keys(h).map(((t,a)=>"queryBuilder"==t&&e.userSearchQuery[t]?e.userSearchQuery[t].map(((e,a)=>`<b>${h[t]+(a+1)}</b> : <b>${h.relation}</b> : `+e.relation+" ,&nbsp "+`<b>${h.searchBy}</b> : `+e.searchBy+" ,&nbsp "+`<b>${h.searchValue}</b> : `+e.searchValue)):""!=e.userSearchQuery[t]&&null!=e.userSearchQuery[t]?`<b>&nbsp;${h[t]}</b> : `+e.userSearchQuery[t]:null)):null)}))})),r.push(a)})),l(r),j(r),console.log("Inside search list total count >>> ",T),f((t+1)*x<T),e.loadingStop()})).catch((t=>{console.log("Err",t),e.loadingStop()}))}(S)}),[S,T]);const w={sortName:m,sortOrder:p,onSortChange:function(e,t){y(e),O(t)}};return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-md-12 list-page mt-3",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-lg-12 grid-margin stretch-card",children:Object(b.jsx)("div",{className:"card",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h4",{className:"card-title",children:"Search History"}),Object(b.jsxs)("div",{children:[Object(b.jsxs)(d.BootstrapTable,{data:o,striped:!0,hover:!0,pagination:!1,search:!0,options:w,children:[Object(b.jsx)(d.TableHeaderColumn,{width:"50",isKey:!0,dataField:"id",dataFormat:(e,t,a,r)=>Object(b.jsx)("div",{children:S*x+(r+1)}),children:"Sl No"}),Object(b.jsx)(d.TableHeaderColumn,{width:"100",dataField:"searchType",dataSort:!0,children:"Search Type"}),Object(b.jsx)(d.TableHeaderColumn,{width:"520",dataField:"querySting",dataFormat:(e,t,a,r)=>e.filter((e=>null!==e)),dataSort:!0,children:"Query"}),Object(b.jsx)(d.TableHeaderColumn,{width:"100",dataField:"tradeType",dataSort:!0,children:"Trade Type"}),Object(b.jsx)(d.TableHeaderColumn,{width:"80",dataField:"countryCode",dataSort:!0,children:"Country"}),Object(b.jsx)(d.TableHeaderColumn,{width:"150",dataField:"userSearchQuery",dataFormat:(e,t)=>c()(t.fromDate).format("MMM. DD, YYYY")+" - "+c()(t.toDate).format("MMM. DD, YYYY"),dataSort:!0,children:"Period"}),Object(b.jsx)(d.TableHeaderColumn,{width:"100",dataField:"totalRecords",dataSort:!0,children:"Total Records"}),s&&0==s.uplineId?Object(b.jsx)(d.TableHeaderColumn,{width:"150",dataField:"createdByName",dataFormat:(e,t)=>e+" [ "+t.createdByEmail+" ]",dataSort:!0,children:"Searched By"}):null,Object(b.jsx)(d.TableHeaderColumn,{width:"160",dataField:"userSearchQuery",dataFormat:(e,t)=>c()(t.createdDate).format("MMM. DD, YYYY, h:mm:ss a"),dataSort:!0,children:"Searched On"}),Object(b.jsx)(d.TableHeaderColumn,{width:"50",dataField:"searchId",dataFormat:(e,a)=>Object(b.jsxs)("div",{children:[" ",Object(b.jsx)("button",{onClick:()=>{t.push({pathname:"/list1",state:{search_id:e,workspace_id:"NIL",search_type:"HISTORY"}})},className:"effect-btn btn btn-primary mt-2 mr-2 icon-lg",children:Object(b.jsx)("i",{className:"icon ion-md-search"})})]}),children:"Action"})]}),Object(b.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[Object(b.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>{S>0&&g(S-1)},disabled:0===S,children:"Previous"}),Object(b.jsxs)("span",{children:["Page ",S+1," of ",Math.ceil(T/x)]}),Object(b.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>{C&&g(S+1)},disabled:!C,children:"Next"})]})]})]})})})})})})})})})))}}]);
//# sourceMappingURL=5.ab939c95.chunk.js.map